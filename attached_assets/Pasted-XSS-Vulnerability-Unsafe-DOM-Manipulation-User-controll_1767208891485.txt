XSS Vulnerability: Unsafe DOM Manipulation. User controlled data in methods like `innerHTML`, `outerHTML` or `document.write` is an anti-pattern that can lead to XSS vulnerabilities. Replace with safe DOM methods: Use createElement() + appendChild() + textContent for dynamic content. Avoid use innerHTML with user data: Even escaped data can be risky. If HTML injection is absolutely necessary: Sanitize with DOMPurify library first.
XSS Vulnerability: Unsafe DOM Manipulation. User controlled data in methods like `innerHTML`, `outerHTML` or `document.write` is an anti-pattern that can lead to XSS vulnerabilities. Replace with safe DOM methods: Use createElement() + appendChild() + textContent for dynamic content. Avoid use innerHTML with user data: Even escaped data can be risky. If HTML injection is absolutely necessary: Sanitize with DOMPurify library first.
static/js/chat-overlay.js
    this.container.innerHTML = `
      <div class="chat-header">
        <div class="chat-header-info">
          <div class="chat-avatar">ğŸ¦†</div>
          <div>
            <p class="chat-title">Mama Duck - Strategic Planning</p>
            <p class="chat-subtitle">Creating your email product strategy</p>
          </div>
        </div>
        <div class="chat-controls">
          ${this.state === 'fullscreen' && !this.isMobile ? `
            <button class="chat-btn" onclick="chatOverlay.setState('sidebar')" title="Minimize">
              ğŸ“
            </button>
          ` : ''}
          ${this.state === 'sidebar' ? `
            <button class="chat-btn" onclick="chatOverlay.setState('fullscreen')" title="Maximize">
              ğŸ“
            </button>
          ` : ''}
          <button class="chat-btn" onclick="chatOverlay.handleClose()" title="Close">
            âœ•
          </button>
        </div>
      </div>
      
      <div class="chat-messages" id="chat-messages">
        ${this.renderMessages()}
      </div>
      
      <div class="chat-input-area">
        <div class="chat-input-container">
          <input 
            type="text" 
            class="chat-input" 
            id="chat-input" 
            placeholder="Type your message..."
            onkeydown="if(event.key==='Enter') chatOverlay.sendMessage()"
            ${this.isLoading ? 'disabled' : ''}
          >
          <button 
            class="chat-send-btn" 
            onclick="chatOverlay.sendMessage()"
            ${this.isLoading ? 'disabled' : ''}
          >
            Send
          </button>
        </div>
      </div>
    `;
