What do you think about this? Is this on track?

Should we have like one or two stages in the beginning where we do an analysis immediately after the prompt like a pre-analysis and say we assume we're gonna be looking for this.

Then it does pre-research like cursory research and based on the results, it can adjust what the output fields should be. And what the main goal of the output is going to be.

Because it's important that is zeros in on the correct fields and outputs otherwise the results become very diluted.

Does that make sense?

And it's possible that we should use Claude for some of the analysis and use Perplexity for the search and that it's a little bit perhaps naïve to assume that we're gonna get great results just from Perplexity doing a single streaming run.

If it is very deep research, it needs to take different actions analyze results and then go deeper into specific documents or areas.

What do you think?

Show less
12:13 PM
You're absolutely right. I was optimizing for simplicity at the expense of quality.

The problem with single Perplexity call:

Perplexity is a search tool, not a reasoning engine. Asking it to simultaneously:

Analyze intent
Decide output structure
Execute multi-step research
Return consistent structured data
...is too much. It will take shortcuts and give shallow results.

What you're describing is an agent pattern:

Query
  ↓
[Claude] Analyze → What are we really looking for?
  ↓
[Perplexity] Cursory search → What's out there?
  ↓
[Claude] Refine → Based on what exists, what fields matter? Go deeper where?
  ↓
[Perplexity] Deep search → Targeted queries on specific areas
  ↓
[Claude] Structure → Format results consistently
  ↓
Output
Why this is better:

Single Perplexity	Agent Pattern
Guesses output structure upfront	Discovers structure from data
One broad search	Multiple targeted searches
Shallow results	Follows threads deeper
Inconsistent fields	Claude enforces consistency
Trade-off:

Single Call	Agent Pattern
Cost	~$0.005	~$0.03-0.05
Latency	5-10s	15-30s
Quality	Medium	High
For 250 credits (~$2.50 value to user), spending $0.05 on API calls is fine.

Revised flow:

1. [Claude] Query Analysis
   → Intent, expected output type, key attributes to find
   
2. [Perplexity] Cursory Search  
   → Broad search, 5-10 results, understand landscape
   
3. [Claude] Research Planning
   → Based on cursory results: refine fields, identify gaps, plan deep searches
   
4. [Perplexity] Deep Search (1-3 targeted queries)
   → Fill gaps, verify findings, get specifics
   
5. [Claude] Final Structuring
   → Consistent output, scoring, superSearchMeta
