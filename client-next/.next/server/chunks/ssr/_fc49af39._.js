module.exports=[37927,a=>{"use strict";var b=a.i(72131),c=a.i(87924),d=b.createContext(void 0),e=a=>{let c=b.useContext(d);if(a)return a;if(!c)throw Error("No QueryClient set, use QueryClientProvider to set one");return c},f=({client:a,children:e})=>(b.useEffect(()=>(a.mount(),()=>{a.unmount()}),[a]),(0,c.jsx)(d.Provider,{value:a,children:e}));a.s(["QueryClientProvider",()=>f,"useQueryClient",()=>e])},42871,a=>{"use strict";function b(){}function c(a,b){return"function"==typeof a?a(b):a}function d(a){return"number"==typeof a&&a>=0&&a!==1/0}function e(a,b){return Math.max(a+(b||0)-Date.now(),0)}function f(a,b){return"function"==typeof a?a(b):a}function g(a,b){return"function"==typeof a?a(b):a}function h(a,b){let{type:c="all",exact:d,fetchStatus:e,predicate:f,queryKey:g,stale:h}=a;if(g){if(d){if(b.queryHash!==j(g,b.options))return!1}else if(!l(b.queryKey,g))return!1}if("all"!==c){let a=b.isActive();if("active"===c&&!a||"inactive"===c&&a)return!1}return("boolean"!=typeof h||b.isStale()===h)&&(!e||e===b.state.fetchStatus)&&(!f||!!f(b))}function i(a,b){let{exact:c,status:d,predicate:e,mutationKey:f}=a;if(f){if(!b.options.mutationKey)return!1;if(c){if(k(b.options.mutationKey)!==k(f))return!1}else if(!l(b.options.mutationKey,f))return!1}return(!d||b.state.status===d)&&(!e||!!e(b))}function j(a,b){return(b?.queryKeyHashFn||k)(a)}function k(a){return JSON.stringify(a,(a,b)=>o(b)?Object.keys(b).sort().reduce((a,c)=>(a[c]=b[c],a),{}):b)}function l(a,b){return a===b||typeof a==typeof b&&!!a&&!!b&&"object"==typeof a&&"object"==typeof b&&!Object.keys(b).some(c=>!l(a[c],b[c]))}function m(a,b){if(!b||Object.keys(a).length!==Object.keys(b).length)return!1;for(let c in a)if(a[c]!==b[c])return!1;return!0}function n(a){return Array.isArray(a)&&a.length===Object.keys(a).length}function o(a){if(!p(a))return!1;let b=a.constructor;if(void 0===b)return!0;let c=b.prototype;return!!p(c)&&!!c.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(a)===Object.prototype}function p(a){return"[object Object]"===Object.prototype.toString.call(a)}function q(a){return new Promise(b=>{setTimeout(b,a)})}function r(a,b,c){return"function"==typeof c.structuralSharing?c.structuralSharing(a,b):!1!==c.structuralSharing?function a(b,c){if(b===c)return b;let d=n(b)&&n(c);if(d||o(b)&&o(c)){let e=d?b:Object.keys(b),f=e.length,g=d?c:Object.keys(c),h=g.length,i=d?[]:{},j=0;for(let f=0;f<h;f++){let h=d?f:g[f];(!d&&e.includes(h)||d)&&void 0===b[h]&&void 0===c[h]?(i[h]=void 0,j++):(i[h]=a(b[h],c[h]),i[h]===b[h]&&void 0!==b[h]&&j++)}return f===h&&j===f?b:i}return c}(a,b):b}function s(a,b,c=0){let d=[...a,b];return c&&d.length>c?d.slice(1):d}function t(a,b,c=0){let d=[b,...a];return c&&d.length>c?d.slice(0,-1):d}var u=Symbol();function v(a,b){return!a.queryFn&&b?.initialPromise?()=>b.initialPromise:a.queryFn&&a.queryFn!==u?a.queryFn:()=>Promise.reject(Error(`Missing queryFn: '${a.queryHash}'`))}a.s(["addToEnd",()=>s,"addToStart",()=>t,"ensureQueryFn",()=>v,"functionalUpdate",()=>c,"hashKey",()=>k,"hashQueryKeyByOptions",()=>j,"isServer",()=>!0,"isValidTimeout",()=>d,"matchMutation",()=>i,"matchQuery",()=>h,"noop",()=>b,"partialMatchKey",()=>l,"replaceData",()=>r,"resolveEnabled",()=>g,"resolveStaleTime",()=>f,"shallowEqualObjects",()=>m,"skipToken",()=>u,"sleep",()=>q,"timeUntilStale",()=>e])},18544,a=>{"use strict";let b,c,d,e,f,g;var h=(b=[],c=0,d=a=>{a()},e=a=>{a()},f=a=>setTimeout(a,0),{batch:a=>{let g;c++;try{g=a()}finally{let a;--c||(a=b,b=[],a.length&&f(()=>{e(()=>{a.forEach(a=>{d(a)})})}))}return g},batchCalls:a=>(...b)=>{g(()=>{a(...b)})},schedule:g=a=>{c?b.push(a):f(()=>{d(a)})},setNotifyFunction:a=>{d=a},setBatchNotifyFunction:a=>{e=a},setScheduler:a=>{f=a}});a.s(["notifyManager",()=>h])},33791,a=>{"use strict";var b=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(a){return this.listeners.add(a),this.onSubscribe(),()=>{this.listeners.delete(a),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}};a.s(["Subscribable",()=>b])},99745,a=>{"use strict";var b=a.i(33791),c=a.i(42871),d=new class extends b.Subscribable{#a;#b;#c;constructor(){super(),this.#c=a=>{if(!c.isServer&&window.addEventListener){let b=()=>a();return window.addEventListener("visibilitychange",b,!1),()=>{window.removeEventListener("visibilitychange",b)}}}}onSubscribe(){this.#b||this.setEventListener(this.#c)}onUnsubscribe(){this.hasListeners()||(this.#b?.(),this.#b=void 0)}setEventListener(a){this.#c=a,this.#b?.(),this.#b=a(a=>{"boolean"==typeof a?this.setFocused(a):this.onFocus()})}setFocused(a){this.#a!==a&&(this.#a=a,this.onFocus())}onFocus(){let a=this.isFocused();this.listeners.forEach(b=>{b(a)})}isFocused(){return"boolean"==typeof this.#a?this.#a:globalThis.document?.visibilityState!=="hidden"}};a.s(["focusManager",()=>d])},76644,12552,79715,21778,85659,a=>{"use strict";var b=a.i(42871),c=a.i(18544),d=a.i(99745),e=a.i(33791),f=new class extends e.Subscribable{#d=!0;#b;#c;constructor(){super(),this.#c=a=>{if(!b.isServer&&window.addEventListener){let b=()=>a(!0),c=()=>a(!1);return window.addEventListener("online",b,!1),window.addEventListener("offline",c,!1),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",c)}}}}onSubscribe(){this.#b||this.setEventListener(this.#c)}onUnsubscribe(){this.hasListeners()||(this.#b?.(),this.#b=void 0)}setEventListener(a){this.#c=a,this.#b?.(),this.#b=a(this.setOnline.bind(this))}setOnline(a){this.#d!==a&&(this.#d=a,this.listeners.forEach(b=>{b(a)}))}isOnline(){return this.#d}};function g(){let a,b,c=new Promise((c,d)=>{a=c,b=d});function d(a){Object.assign(c,a),delete c.resolve,delete c.reject}return c.status="pending",c.catch(()=>{}),c.resolve=b=>{d({status:"fulfilled",value:b}),a(b)},c.reject=a=>{d({status:"rejected",reason:a}),b(a)},c}function h(a){return Math.min(1e3*2**a,3e4)}function i(a){return(a??"online")!=="online"||f.isOnline()}a.s(["onlineManager",()=>f],12552),a.s(["pendingThenable",()=>g],79715);var j=class extends Error{constructor(a){super("CancelledError"),this.revert=a?.revert,this.silent=a?.silent}};function k(a){return a instanceof j}function l(a){let c,e=!1,k=0,l=!1,m=g(),n=()=>d.focusManager.isFocused()&&("always"===a.networkMode||f.isOnline())&&a.canRun(),o=()=>i(a.networkMode)&&a.canRun(),p=b=>{l||(l=!0,a.onSuccess?.(b),c?.(),m.resolve(b))},q=b=>{l||(l=!0,a.onError?.(b),c?.(),m.reject(b))},r=()=>new Promise(b=>{c=a=>{(l||n())&&b(a)},a.onPause?.()}).then(()=>{c=void 0,l||a.onContinue?.()}),s=()=>{let c;if(l)return;let d=0===k?a.initialPromise:void 0;try{c=d??a.fn()}catch(a){c=Promise.reject(a)}Promise.resolve(c).then(p).catch(c=>{if(l)return;let d=a.retry??3*!b.isServer,f=a.retryDelay??h,g="function"==typeof f?f(k,c):f,i=!0===d||"number"==typeof d&&k<d||"function"==typeof d&&d(k,c);e||!i?q(c):(k++,a.onFail?.(k,c),(0,b.sleep)(g).then(()=>n()?void 0:r()).then(()=>{e?q(c):s()}))})};return{promise:m,cancel:b=>{l||(q(new j(b)),a.abort?.())},continue:()=>(c?.(),m),cancelRetry:()=>{e=!0},continueRetry:()=>{e=!1},canStart:o,start:()=>(o()?s():r().then(s),m)}}a.s(["canFetch",()=>i,"createRetryer",()=>l,"isCancelledError",()=>k],21778);var m=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),(0,b.isValidTimeout)(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(a){this.gcTime=Math.max(this.gcTime||0,a??(b.isServer?1/0:3e5))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}};a.s(["Removable",()=>m],85659);var n=class extends m{#f;#g;#h;#i;#j;#k;constructor(a){super(),this.#k=!1,this.#j=a.defaultOptions,this.setOptions(a.options),this.observers=[],this.#h=a.cache,this.queryKey=a.queryKey,this.queryHash=a.queryHash,this.#f=function(a){let b="function"==typeof a.initialData?a.initialData():a.initialData,c=void 0!==b,d=c?"function"==typeof a.initialDataUpdatedAt?a.initialDataUpdatedAt():a.initialDataUpdatedAt:0;return{data:b,dataUpdateCount:0,dataUpdatedAt:c?d??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:c?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=a.state??this.#f,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#i?.promise}setOptions(a){this.options={...this.#j,...a},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#h.remove(this)}setData(a,c){let d=(0,b.replaceData)(this.state.data,a,this.options);return this.#l({data:d,type:"success",dataUpdatedAt:c?.updatedAt,manual:c?.manual}),d}setState(a,b){this.#l({type:"setState",state:a,setStateOptions:b})}cancel(a){let c=this.#i?.promise;return this.#i?.cancel(a),c?c.then(b.noop).catch(b.noop):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#f)}isActive(){return this.observers.some(a=>!1!==(0,b.resolveEnabled)(a.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===b.skipToken||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(a=>a.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(a=0){return this.state.isInvalidated||void 0===this.state.data||!(0,b.timeUntilStale)(this.state.dataUpdatedAt,a)}onFocus(){let a=this.observers.find(a=>a.shouldFetchOnWindowFocus());a?.refetch({cancelRefetch:!1}),this.#i?.continue()}onOnline(){let a=this.observers.find(a=>a.shouldFetchOnReconnect());a?.refetch({cancelRefetch:!1}),this.#i?.continue()}addObserver(a){this.observers.includes(a)||(this.observers.push(a),this.clearGcTimeout(),this.#h.notify({type:"observerAdded",query:this,observer:a}))}removeObserver(a){this.observers.includes(a)&&(this.observers=this.observers.filter(b=>b!==a),this.observers.length||(this.#i&&(this.#k?this.#i.cancel({revert:!0}):this.#i.cancelRetry()),this.scheduleGc()),this.#h.notify({type:"observerRemoved",query:this,observer:a}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#l({type:"invalidate"})}fetch(a,c){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&c?.cancelRefetch)this.cancel({silent:!0});else if(this.#i)return this.#i.continueRetry(),this.#i.promise}if(a&&this.setOptions(a),!this.options.queryFn){let a=this.observers.find(a=>a.options.queryFn);a&&this.setOptions(a.options)}let d=new AbortController,e=a=>{Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(this.#k=!0,d.signal)})},f=()=>{let a=(0,b.ensureQueryFn)(this.options,c),d={queryKey:this.queryKey,meta:this.meta};return(e(d),this.#k=!1,this.options.persister)?this.options.persister(a,d,this):a(d)},g={fetchOptions:c,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:f};e(g),this.options.behavior?.onFetch(g,this),this.#g=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==g.fetchOptions?.meta)&&this.#l({type:"fetch",meta:g.fetchOptions?.meta});let h=a=>{k(a)&&a.silent||this.#l({type:"error",error:a}),k(a)||(this.#h.config.onError?.(a,this),this.#h.config.onSettled?.(this.state.data,a,this)),this.scheduleGc()};return this.#i=l({initialPromise:c?.initialPromise,fn:g.fetchFn,abort:d.abort.bind(d),onSuccess:a=>{if(void 0===a)return void h(Error(`${this.queryHash} data is undefined`));try{this.setData(a)}catch(a){h(a);return}this.#h.config.onSuccess?.(a,this),this.#h.config.onSettled?.(a,this.state.error,this),this.scheduleGc()},onError:h,onFail:(a,b)=>{this.#l({type:"failed",failureCount:a,error:b})},onPause:()=>{this.#l({type:"pause"})},onContinue:()=>{this.#l({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay,networkMode:g.options.networkMode,canRun:()=>!0}),this.#i.start()}#l(a){let b=b=>{switch(a.type){case"failed":return{...b,fetchFailureCount:a.failureCount,fetchFailureReason:a.error};case"pause":return{...b,fetchStatus:"paused"};case"continue":return{...b,fetchStatus:"fetching"};case"fetch":return{...b,...o(b.data,this.options),fetchMeta:a.meta??null};case"success":return{...b,data:a.data,dataUpdateCount:b.dataUpdateCount+1,dataUpdatedAt:a.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!a.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let c=a.error;if(k(c)&&c.revert&&this.#g)return{...this.#g,fetchStatus:"idle"};return{...b,error:c,errorUpdateCount:b.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:b.fetchFailureCount+1,fetchFailureReason:c,fetchStatus:"idle",status:"error"};case"invalidate":return{...b,isInvalidated:!0};case"setState":return{...b,...a.state}}};this.state=b(this.state),c.notifyManager.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#h.notify({query:this,type:"updated",action:a})})}};function o(a,b){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:i(b.networkMode)?"fetching":"paused",...void 0===a&&{error:null,status:"pending"}}}a.s(["Query",()=>n,"fetchState",()=>o],76644)},19179,a=>{"use strict";var b=a.i(42871),c=a.i(76644),d=a.i(18544),e=a.i(33791),f=class extends e.Subscribable{constructor(a={}){super(),this.config=a,this.#m=new Map}#m;build(a,d,e){let f=d.queryKey,g=d.queryHash??(0,b.hashQueryKeyByOptions)(f,d),h=this.get(g);return h||(h=new c.Query({cache:this,queryKey:f,queryHash:g,options:a.defaultQueryOptions(d),state:e,defaultOptions:a.getQueryDefaults(f)}),this.add(h)),h}add(a){this.#m.has(a.queryHash)||(this.#m.set(a.queryHash,a),this.notify({type:"added",query:a}))}remove(a){let b=this.#m.get(a.queryHash);b&&(a.destroy(),b===a&&this.#m.delete(a.queryHash),this.notify({type:"removed",query:a}))}clear(){d.notifyManager.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}get(a){return this.#m.get(a)}getAll(){return[...this.#m.values()]}find(a){let c={exact:!0,...a};return this.getAll().find(a=>(0,b.matchQuery)(c,a))}findAll(a={}){let c=this.getAll();return Object.keys(a).length>0?c.filter(c=>(0,b.matchQuery)(a,c)):c}notify(a){d.notifyManager.batch(()=>{this.listeners.forEach(b=>{b(a)})})}onFocus(){d.notifyManager.batch(()=>{this.getAll().forEach(a=>{a.onFocus()})})}onOnline(){d.notifyManager.batch(()=>{this.getAll().forEach(a=>{a.onOnline()})})}};a.s(["QueryCache",()=>f])},12794,a=>{"use strict";var b=a.i(18544),c=a.i(85659),d=a.i(21778),e=class extends c.Removable{#n;#o;#i;constructor(a){super(),this.mutationId=a.mutationId,this.#o=a.mutationCache,this.#n=[],this.state=a.state||f(),this.setOptions(a.options),this.scheduleGc()}setOptions(a){this.options=a,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(a){this.#n.includes(a)||(this.#n.push(a),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",mutation:this,observer:a}))}removeObserver(a){this.#n=this.#n.filter(b=>b!==a),this.scheduleGc(),this.#o.notify({type:"observerRemoved",mutation:this,observer:a})}optionalRemove(){this.#n.length||("pending"===this.state.status?this.scheduleGc():this.#o.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(a){this.#i=(0,d.createRetryer)({fn:()=>this.options.mutationFn?this.options.mutationFn(a):Promise.reject(Error("No mutationFn found")),onFail:(a,b)=>{this.#l({type:"failed",failureCount:a,error:b})},onPause:()=>{this.#l({type:"pause"})},onContinue:()=>{this.#l({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#o.canRun(this)});let b="pending"===this.state.status,c=!this.#i.canStart();try{if(!b){this.#l({type:"pending",variables:a,isPaused:c}),await this.#o.config.onMutate?.(a,this);let b=await this.options.onMutate?.(a);b!==this.state.context&&this.#l({type:"pending",context:b,variables:a,isPaused:c})}let d=await this.#i.start();return await this.#o.config.onSuccess?.(d,a,this.state.context,this),await this.options.onSuccess?.(d,a,this.state.context),await this.#o.config.onSettled?.(d,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(d,null,a,this.state.context),this.#l({type:"success",data:d}),d}catch(b){try{throw await this.#o.config.onError?.(b,a,this.state.context,this),await this.options.onError?.(b,a,this.state.context),await this.#o.config.onSettled?.(void 0,b,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,b,a,this.state.context),b}finally{this.#l({type:"error",error:b})}}finally{this.#o.runNext(this)}}#l(a){this.state=(b=>{switch(a.type){case"failed":return{...b,failureCount:a.failureCount,failureReason:a.error};case"pause":return{...b,isPaused:!0};case"continue":return{...b,isPaused:!1};case"pending":return{...b,context:a.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:a.isPaused,status:"pending",variables:a.variables,submittedAt:Date.now()};case"success":return{...b,data:a.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...b,data:void 0,error:a.error,failureCount:b.failureCount+1,failureReason:a.error,isPaused:!1,status:"error"}}})(this.state),b.notifyManager.batch(()=>{this.#n.forEach(b=>{b.onMutationUpdate(a)}),this.#o.notify({mutation:this,type:"updated",action:a})})}};function f(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}a.s(["Mutation",()=>e,"getDefaultState",()=>f])},74642,a=>{"use strict";var b=a.i(42871),c=a.i(19179),d=a.i(18544),e=a.i(12794),f=a.i(33791),g=class extends f.Subscribable{constructor(a={}){super(),this.config=a,this.#p=new Map,this.#q=Date.now()}#p;#q;build(a,b,c){let d=new e.Mutation({mutationCache:this,mutationId:++this.#q,options:a.defaultMutationOptions(b),state:c});return this.add(d),d}add(a){let b=h(a),c=this.#p.get(b)??[];c.push(a),this.#p.set(b,c),this.notify({type:"added",mutation:a})}remove(a){let b=h(a);if(this.#p.has(b)){let c=this.#p.get(b)?.filter(b=>b!==a);c&&(0===c.length?this.#p.delete(b):this.#p.set(b,c))}this.notify({type:"removed",mutation:a})}canRun(a){let b=this.#p.get(h(a))?.find(a=>"pending"===a.state.status);return!b||b===a}runNext(a){let b=this.#p.get(h(a))?.find(b=>b!==a&&b.state.isPaused);return b?.continue()??Promise.resolve()}clear(){d.notifyManager.batch(()=>{this.getAll().forEach(a=>{this.remove(a)})})}getAll(){return[...this.#p.values()].flat()}find(a){let c={exact:!0,...a};return this.getAll().find(a=>(0,b.matchMutation)(c,a))}findAll(a={}){return this.getAll().filter(c=>(0,b.matchMutation)(a,c))}notify(a){d.notifyManager.batch(()=>{this.listeners.forEach(b=>{b(a)})})}resumePausedMutations(){let a=this.getAll().filter(a=>a.state.isPaused);return d.notifyManager.batch(()=>Promise.all(a.map(a=>a.continue().catch(b.noop))))}};function h(a){return a.options.scope?.id??String(a.mutationId)}var i=a.i(99745),j=a.i(12552);function k(a){return{onFetch:(c,d)=>{let e=c.options,f=c.fetchOptions?.meta?.fetchMore?.direction,g=c.state.data?.pages||[],h=c.state.data?.pageParams||[],i={pages:[],pageParams:[]},j=0,k=async()=>{let d=!1,k=(0,b.ensureQueryFn)(c.options,c.fetchOptions),m=async(a,e,f)=>{if(d)return Promise.reject();if(null==e&&a.pages.length)return Promise.resolve(a);let g={queryKey:c.queryKey,pageParam:e,direction:f?"backward":"forward",meta:c.options.meta};Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(c.signal.aborted?d=!0:c.signal.addEventListener("abort",()=>{d=!0}),c.signal)});let h=await k(g),{maxPages:i}=c.options,j=f?b.addToStart:b.addToEnd;return{pages:j(a.pages,h,i),pageParams:j(a.pageParams,e,i)}};if(f&&g.length){let a="backward"===f,b={pages:g,pageParams:h},c=(a?function(a,{pages:b,pageParams:c}){return b.length>0?a.getPreviousPageParam?.(b[0],b,c[0],c):void 0}:l)(e,b);i=await m(b,c,a)}else{let b=a??g.length;do{let a=0===j?h[0]??e.initialPageParam:l(e,i);if(j>0&&null==a)break;i=await m(i,a),j++}while(j<b)}return i};c.options.persister?c.fetchFn=()=>c.options.persister?.(k,{queryKey:c.queryKey,meta:c.options.meta,signal:c.signal},d):c.fetchFn=k}}}function l(a,{pages:b,pageParams:c}){let d=b.length-1;return b.length>0?a.getNextPageParam(b[d],b,c[d],c):void 0}var m=class{#r;#o;#j;#s;#t;#u;#v;#w;constructor(a={}){this.#r=a.queryCache||new c.QueryCache,this.#o=a.mutationCache||new g,this.#j=a.defaultOptions||{},this.#s=new Map,this.#t=new Map,this.#u=0}mount(){this.#u++,1===this.#u&&(this.#v=i.focusManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#r.onFocus())}),this.#w=j.onlineManager.subscribe(async a=>{a&&(await this.resumePausedMutations(),this.#r.onOnline())}))}unmount(){this.#u--,0===this.#u&&(this.#v?.(),this.#v=void 0,this.#w?.(),this.#w=void 0)}isFetching(a){return this.#r.findAll({...a,fetchStatus:"fetching"}).length}isMutating(a){return this.#o.findAll({...a,status:"pending"}).length}getQueryData(a){let b=this.defaultQueryOptions({queryKey:a});return this.#r.get(b.queryHash)?.state.data}ensureQueryData(a){let c=this.getQueryData(a.queryKey);if(void 0===c)return this.fetchQuery(a);{let d=this.defaultQueryOptions(a),e=this.#r.build(this,d);return a.revalidateIfStale&&e.isStaleByTime((0,b.resolveStaleTime)(d.staleTime,e))&&this.prefetchQuery(d),Promise.resolve(c)}}getQueriesData(a){return this.#r.findAll(a).map(({queryKey:a,state:b})=>[a,b.data])}setQueryData(a,c,d){let e=this.defaultQueryOptions({queryKey:a}),f=this.#r.get(e.queryHash),g=f?.state.data,h=(0,b.functionalUpdate)(c,g);if(void 0!==h)return this.#r.build(this,e).setData(h,{...d,manual:!0})}setQueriesData(a,b,c){return d.notifyManager.batch(()=>this.#r.findAll(a).map(({queryKey:a})=>[a,this.setQueryData(a,b,c)]))}getQueryState(a){let b=this.defaultQueryOptions({queryKey:a});return this.#r.get(b.queryHash)?.state}removeQueries(a){let b=this.#r;d.notifyManager.batch(()=>{b.findAll(a).forEach(a=>{b.remove(a)})})}resetQueries(a,b){let c=this.#r,e={type:"active",...a};return d.notifyManager.batch(()=>(c.findAll(a).forEach(a=>{a.reset()}),this.refetchQueries(e,b)))}cancelQueries(a={},c={}){let e={revert:!0,...c};return Promise.all(d.notifyManager.batch(()=>this.#r.findAll(a).map(a=>a.cancel(e)))).then(b.noop).catch(b.noop)}invalidateQueries(a={},b={}){return d.notifyManager.batch(()=>{if(this.#r.findAll(a).forEach(a=>{a.invalidate()}),"none"===a.refetchType)return Promise.resolve();let c={...a,type:a.refetchType??a.type??"active"};return this.refetchQueries(c,b)})}refetchQueries(a={},c){let e={...c,cancelRefetch:c?.cancelRefetch??!0};return Promise.all(d.notifyManager.batch(()=>this.#r.findAll(a).filter(a=>!a.isDisabled()).map(a=>{let c=a.fetch(void 0,e);return e.throwOnError||(c=c.catch(b.noop)),"paused"===a.state.fetchStatus?Promise.resolve():c}))).then(b.noop)}fetchQuery(a){let c=this.defaultQueryOptions(a);void 0===c.retry&&(c.retry=!1);let d=this.#r.build(this,c);return d.isStaleByTime((0,b.resolveStaleTime)(c.staleTime,d))?d.fetch(c):Promise.resolve(d.state.data)}prefetchQuery(a){return this.fetchQuery(a).then(b.noop).catch(b.noop)}fetchInfiniteQuery(a){return a.behavior=k(a.pages),this.fetchQuery(a)}prefetchInfiniteQuery(a){return this.fetchInfiniteQuery(a).then(b.noop).catch(b.noop)}ensureInfiniteQueryData(a){return a.behavior=k(a.pages),this.ensureQueryData(a)}resumePausedMutations(){return j.onlineManager.isOnline()?this.#o.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#r}getMutationCache(){return this.#o}getDefaultOptions(){return this.#j}setDefaultOptions(a){this.#j=a}setQueryDefaults(a,c){this.#s.set((0,b.hashKey)(a),{queryKey:a,defaultOptions:c})}getQueryDefaults(a){let c=[...this.#s.values()],d={};return c.forEach(c=>{(0,b.partialMatchKey)(a,c.queryKey)&&(d={...d,...c.defaultOptions})}),d}setMutationDefaults(a,c){this.#t.set((0,b.hashKey)(a),{mutationKey:a,defaultOptions:c})}getMutationDefaults(a){let c=[...this.#t.values()],d={};return c.forEach(c=>{(0,b.partialMatchKey)(a,c.mutationKey)&&(d={...d,...c.defaultOptions})}),d}defaultQueryOptions(a){if(a._defaulted)return a;let c={...this.#j.queries,...this.getQueryDefaults(a.queryKey),...a,_defaulted:!0};return c.queryHash||(c.queryHash=(0,b.hashQueryKeyByOptions)(c.queryKey,c)),void 0===c.refetchOnReconnect&&(c.refetchOnReconnect="always"!==c.networkMode),void 0===c.throwOnError&&(c.throwOnError=!!c.suspense),!c.networkMode&&c.persister&&(c.networkMode="offlineFirst"),!0!==c.enabled&&c.queryFn===b.skipToken&&(c.enabled=!1),c}defaultMutationOptions(a){return a?._defaulted?a:{...this.#j.mutations,...a?.mutationKey&&this.getMutationDefaults(a.mutationKey),...a,_defaulted:!0}}clear(){this.#r.clear(),this.#o.clear()}};async function n(a){if(!a.ok){let b=await a.text()||a.statusText;throw Error(`${a.status}: ${b}`)}}async function o(a){let b=a.clone();try{return await a.json()}catch(c){console.error("JSON parsing error:",{status:a.status,statusText:a.statusText,url:a.url,error:c});try{let c=await b.text();console.error("Response that failed to parse:",{text:c.substring(0,500),contentType:a.headers.get("content-type")})}catch(a){console.error("Could not clone response for debugging:",a)}throw Error(`Failed to parse JSON response: ${c instanceof Error?c.message:"Unknown parsing error"}`)}}async function p(a,b,c){try{console.log(`API Request: ${a} ${b}`,{hasData:!!c,timestamp:new Date().toISOString()});let d=localStorage.getItem("authToken"),e=c?{"Content-Type":"application/json"}:{},f=b.includes("/daily-outreach/batch/");d&&!f&&(e.Authorization=`Bearer ${d}`);let g=await fetch(b,{method:a,headers:e,body:c?JSON.stringify(c):void 0,credentials:"include"});return await n(g),g}catch(c){throw console.error(`API Request Error: ${a} ${b}`,{error:c instanceof Error?c.message:"Unknown error",timestamp:new Date().toISOString()}),c}}let q=({on401:a})=>async({queryKey:b})=>{let c;c=Array.isArray(b)&&b.length>1?b.join("/"):b[0];try{let b=localStorage.getItem("authToken"),d={},e=c.includes("/daily-outreach/batch/");b&&!e&&(d.Authorization=`Bearer ${b}`);let f=await fetch(c,{credentials:"include",headers:d});if("returnNull"===a&&401===f.status)return null;return await n(f),await o(f)}catch(a){throw console.error(`Query error for ${c}:`,a),a}},r=new m({defaultOptions:{queries:{queryFn:q({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});a.s(["apiRequest",()=>p,"getQueryFn",0,q,"queryClient",0,r],74642)},41579,a=>{"use strict";var b=a.i(99745),c=a.i(18544),d=a.i(76644),e=a.i(33791),f=a.i(79715),g=a.i(42871),h=class extends e.Subscribable{constructor(a,b){super(),this.options=b,this.#x=a,this.#y=null,this.#z=(0,f.pendingThenable)(),this.options.experimental_prefetchInRender||this.#z.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(b)}#x;#A=void 0;#B=void 0;#C=void 0;#D;#E;#z;#y;#F;#G;#H;#I;#J;#K;#L=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#A.addObserver(this),i(this.#A,this.options)?this.#M():this.updateResult(),this.#N())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return j(this.#A,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return j(this.#A,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#O(),this.#P(),this.#A.removeObserver(this)}setOptions(a,b){let c=this.options,d=this.#A;if(this.options=this.#x.defaultQueryOptions(a),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,g.resolveEnabled)(this.options.enabled,this.#A))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#Q(),this.#A.setOptions(this.options),c._defaulted&&!(0,g.shallowEqualObjects)(this.options,c)&&this.#x.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#A,observer:this});let e=this.hasListeners();e&&k(this.#A,d,this.options,c)&&this.#M(),this.updateResult(b),e&&(this.#A!==d||(0,g.resolveEnabled)(this.options.enabled,this.#A)!==(0,g.resolveEnabled)(c.enabled,this.#A)||(0,g.resolveStaleTime)(this.options.staleTime,this.#A)!==(0,g.resolveStaleTime)(c.staleTime,this.#A))&&this.#R();let f=this.#S();e&&(this.#A!==d||(0,g.resolveEnabled)(this.options.enabled,this.#A)!==(0,g.resolveEnabled)(c.enabled,this.#A)||f!==this.#K)&&this.#T(f)}getOptimisticResult(a){var b,c;let d=this.#x.getQueryCache().build(this.#x,a),e=this.createResult(d,a);return b=this,c=e,(0,g.shallowEqualObjects)(b.getCurrentResult(),c)||(this.#C=e,this.#E=this.options,this.#D=this.#A.state),e}getCurrentResult(){return this.#C}trackResult(a,b){let c={};return Object.keys(a).forEach(d=>{Object.defineProperty(c,d,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(d),b?.(d),a[d])})}),c}trackProp(a){this.#L.add(a)}getCurrentQuery(){return this.#A}refetch({...a}={}){return this.fetch({...a})}fetchOptimistic(a){let b=this.#x.defaultQueryOptions(a),c=this.#x.getQueryCache().build(this.#x,b);return c.fetch().then(()=>this.createResult(c,b))}fetch(a){return this.#M({...a,cancelRefetch:a.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#C))}#M(a){this.#Q();let b=this.#A.fetch(this.options,a);return a?.throwOnError||(b=b.catch(g.noop)),b}#R(){this.#O();let a=(0,g.resolveStaleTime)(this.options.staleTime,this.#A);if(g.isServer||this.#C.isStale||!(0,g.isValidTimeout)(a))return;let b=(0,g.timeUntilStale)(this.#C.dataUpdatedAt,a);this.#I=setTimeout(()=>{this.#C.isStale||this.updateResult()},b+1)}#S(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#A):this.options.refetchInterval)??!1}#T(a){this.#P(),this.#K=a,!g.isServer&&!1!==(0,g.resolveEnabled)(this.options.enabled,this.#A)&&(0,g.isValidTimeout)(this.#K)&&0!==this.#K&&(this.#J=setInterval(()=>{(this.options.refetchIntervalInBackground||b.focusManager.isFocused())&&this.#M()},this.#K))}#N(){this.#R(),this.#T(this.#S())}#O(){this.#I&&(clearTimeout(this.#I),this.#I=void 0)}#P(){this.#J&&(clearInterval(this.#J),this.#J=void 0)}createResult(a,b){let c,e=this.#A,h=this.options,j=this.#C,m=this.#D,n=this.#E,o=a!==e?a.state:this.#B,{state:p}=a,q={...p},r=!1;if(b._optimisticResults){let c=this.hasListeners(),f=!c&&i(a,b),g=c&&k(a,e,b,h);(f||g)&&(q={...q,...(0,d.fetchState)(p.data,a.options)}),"isRestoring"===b._optimisticResults&&(q.fetchStatus="idle")}let{error:s,errorUpdatedAt:t,status:u}=q;if(b.select&&void 0!==q.data)if(j&&q.data===m?.data&&b.select===this.#F)c=this.#G;else try{this.#F=b.select,c=b.select(q.data),c=(0,g.replaceData)(j?.data,c,b),this.#G=c,this.#y=null}catch(a){this.#y=a}else c=q.data;if(void 0!==b.placeholderData&&void 0===c&&"pending"===u){let a;if(j?.isPlaceholderData&&b.placeholderData===n?.placeholderData)a=j.data;else if(a="function"==typeof b.placeholderData?b.placeholderData(this.#H?.state.data,this.#H):b.placeholderData,b.select&&void 0!==a)try{a=b.select(a),this.#y=null}catch(a){this.#y=a}void 0!==a&&(u="success",c=(0,g.replaceData)(j?.data,a,b),r=!0)}this.#y&&(s=this.#y,c=this.#G,t=Date.now(),u="error");let v="fetching"===q.fetchStatus,w="pending"===u,x="error"===u,y=w&&v,z=void 0!==c,A={status:u,fetchStatus:q.fetchStatus,isPending:w,isSuccess:"success"===u,isError:x,isInitialLoading:y,isLoading:y,data:c,dataUpdatedAt:q.dataUpdatedAt,error:s,errorUpdatedAt:t,failureCount:q.fetchFailureCount,failureReason:q.fetchFailureReason,errorUpdateCount:q.errorUpdateCount,isFetched:q.dataUpdateCount>0||q.errorUpdateCount>0,isFetchedAfterMount:q.dataUpdateCount>o.dataUpdateCount||q.errorUpdateCount>o.errorUpdateCount,isFetching:v,isRefetching:v&&!w,isLoadingError:x&&!z,isPaused:"paused"===q.fetchStatus,isPlaceholderData:r,isRefetchError:x&&z,isStale:l(a,b),refetch:this.refetch,promise:this.#z};if(this.options.experimental_prefetchInRender){let b=a=>{"error"===A.status?a.reject(A.error):void 0!==A.data&&a.resolve(A.data)},c=()=>{b(this.#z=A.promise=(0,f.pendingThenable)())},d=this.#z;switch(d.status){case"pending":a.queryHash===e.queryHash&&b(d);break;case"fulfilled":("error"===A.status||A.data!==d.value)&&c();break;case"rejected":("error"!==A.status||A.error!==d.reason)&&c()}}return A}updateResult(a){let b=this.#C,c=this.createResult(this.#A,this.options);if(this.#D=this.#A.state,this.#E=this.options,void 0!==this.#D.data&&(this.#H=this.#A),(0,g.shallowEqualObjects)(c,b))return;this.#C=c;let d={},e=()=>{if(!b)return!0;let{notifyOnChangeProps:a}=this.options,c="function"==typeof a?a():a;if("all"===c||!c&&!this.#L.size)return!0;let d=new Set(c??this.#L);return this.options.throwOnError&&d.add("error"),Object.keys(this.#C).some(a=>this.#C[a]!==b[a]&&d.has(a))};a?.listeners!==!1&&e()&&(d.listeners=!0),this.#U({...d,...a})}#Q(){let a=this.#x.getQueryCache().build(this.#x,this.options);if(a===this.#A)return;let b=this.#A;this.#A=a,this.#B=a.state,this.hasListeners()&&(b?.removeObserver(this),a.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#N()}#U(a){c.notifyManager.batch(()=>{a.listeners&&this.listeners.forEach(a=>{a(this.#C)}),this.#x.getQueryCache().notify({query:this.#A,type:"observerResultsUpdated"})})}};function i(a,b){return!1!==(0,g.resolveEnabled)(b.enabled,a)&&void 0===a.state.data&&("error"!==a.state.status||!1!==b.retryOnMount)||void 0!==a.state.data&&j(a,b,b.refetchOnMount)}function j(a,b,c){if(!1!==(0,g.resolveEnabled)(b.enabled,a)){let d="function"==typeof c?c(a):c;return"always"===d||!1!==d&&l(a,b)}return!1}function k(a,b,c,d){return(a!==b||!1===(0,g.resolveEnabled)(d.enabled,a))&&(!c.suspense||"error"!==a.state.status)&&l(a,c)}function l(a,b){return!1!==(0,g.resolveEnabled)(b.enabled,a)&&a.isStaleByTime((0,g.resolveStaleTime)(b.staleTime,a))}a.s(["QueryObserver",()=>h])},33217,16592,a=>{"use strict";let b;var c=a.i(41579),d=a.i(72131),e=a.i(42871),f=a.i(18544),g=a.i(37927);a.i(87924);var h=d.createContext((b=!1,{clearReset:()=>{b=!1},reset:()=>{b=!0},isReset:()=>b}));function i(a,b){return"function"==typeof a?a(...b):!!a}function j(){}a.s(["noop",()=>j,"shouldThrowError",()=>i],16592);var k=d.createContext(!1);k.Provider;var l=(a,b,c)=>b.fetchOptimistic(a).catch(()=>{c.clearReset()});function m(a,b){return function(a,b,c){let m=(0,g.useQueryClient)(c),n=d.useContext(k),o=d.useContext(h),p=m.defaultQueryOptions(a);m.getDefaultOptions().queries?._experimental_beforeQuery?.(p),p._optimisticResults=n?"isRestoring":"optimistic",p.suspense&&(void 0===p.staleTime&&(p.staleTime=1e3),"number"==typeof p.gcTime&&(p.gcTime=Math.max(p.gcTime,1e3))),(p.suspense||p.throwOnError||p.experimental_prefetchInRender)&&!o.isReset()&&(p.retryOnMount=!1),d.useEffect(()=>{o.clearReset()},[o]);let q=!m.getQueryCache().get(p.queryHash),[r]=d.useState(()=>new b(m,p)),s=r.getOptimisticResult(p);if(d.useSyncExternalStore(d.useCallback(a=>{let b=n?j:r.subscribe(f.notifyManager.batchCalls(a));return r.updateResult(),b},[r,n]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d.useEffect(()=>{r.setOptions(p,{listeners:!1})},[p,r]),p?.suspense&&s.isPending)throw l(p,r,o);if((({result:a,errorResetBoundary:b,throwOnError:c,query:d})=>a.isError&&!b.isReset()&&!a.isFetching&&d&&i(c,[a.error,d]))({result:s,errorResetBoundary:o,throwOnError:p.throwOnError,query:m.getQueryCache().get(p.queryHash)}))throw s.error;if(m.getDefaultOptions().queries?._experimental_afterQuery?.(p,s),p.experimental_prefetchInRender&&!e.isServer&&s.isLoading&&s.isFetching&&!n){let a=q?l(p,r,o):m.getQueryCache().get(p.queryHash)?.promise;a?.catch(j).finally(()=>{r.updateResult()})}return p.notifyOnChangeProps?s:r.trackResult(s)}(a,c.QueryObserver,b)}a.s(["useQuery",()=>m],33217)},70025,a=>{"use strict";var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#x;#C=void 0;#V;#W;constructor(a,b){super(),this.#x=a,this.setOptions(b),this.bindMethods(),this.#X()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#x.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#x.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#V,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#V?.state.status==="pending"&&this.#V.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#V?.removeObserver(this)}onMutationUpdate(a){this.#X(),this.#U(a)}getCurrentResult(){return this.#C}reset(){this.#V?.removeObserver(this),this.#V=void 0,this.#X(),this.#U()}mutate(a,b){return this.#W=b,this.#V?.removeObserver(this),this.#V=this.#x.getMutationCache().build(this.#x,this.options),this.#V.addObserver(this),this.#V.execute(a)}#X(){let a=this.#V?.state??(0,c.getDefaultState)();this.#C={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#U(a){d.notifyManager.batch(()=>{if(this.#W&&this.hasListeners()){let b=this.#C.variables,c=this.#C.context;a?.type==="success"?(this.#W.onSuccess?.(a.data,b,c),this.#W.onSettled?.(a.data,null,b,c)):a?.type==="error"&&(this.#W.onError?.(a.error,b,c),this.#W.onSettled?.(void 0,a.error,b,c))}this.listeners.forEach(a=>{a(this.#C)})})}},h=a.i(37927),i=a.i(16592);function j(a,c){let e=(0,h.useQueryClient)(c),[f]=b.useState(()=>new g(e,a));b.useEffect(()=>{f.setOptions(a)},[f,a]);let j=b.useSyncExternalStore(b.useCallback(a=>f.subscribe(d.notifyManager.batchCalls(a)),[f]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),k=b.useCallback((a,b)=>{f.mutate(a,b).catch(i.noop)},[f]);if(j.error&&(0,i.shouldThrowError)(f.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>j],70025)},87563,a=>{"use strict";var b=a.i(72131);let c=0,d=new Map,e=a=>{if(d.has(a))return;let b=setTimeout(()=>{d.delete(a),h({type:"REMOVE_TOAST",toastId:a})},3500);d.set(a,b)},f=[],g={toasts:[]};function h(a){g=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?e(c):a.toasts.forEach(a=>{e(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(g,a),f.forEach(a=>{a(g)})}function i({...a}){let b=(c=(c+1)%Number.MAX_SAFE_INTEGER).toString(),d=()=>h({type:"DISMISS_TOAST",toastId:b});return h({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||d()}}}),{id:b,dismiss:d,update:a=>h({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function j(){let[a,c]=b.useState(g);return b.useEffect(()=>(f.push(c),()=>{let a=f.indexOf(c);a>-1&&f.splice(a,1)}),[a]),{...a,toast:i,dismiss:a=>h({type:"DISMISS_TOAST",toastId:a})}}a.s(["useToast",()=>j])},46552,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(74642),g=a.i(87563),h=a.i(26153);let i=(0,c.createContext)(null);function j({children:j}){let{toast:k}=(0,g.useToast)(),l=(0,c.useRef)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),{data:s}=(0,d.useQuery)({queryKey:["/api/test-mode-status"],queryFn:async()=>(await fetch("/api/test-mode-status")).json(),staleTime:1/0,enabled:!0,initialData:void 0}),t=s?.enabled===!0,{data:u,error:v,isLoading:w}=(0,d.useQuery)({queryKey:["/api/user"],queryFn:(0,f.getQueryFn)({on401:"returnNull"}),enabled:t,initialData:t?{id:1,email:"demo@5ducks.ai",username:"Guest User",createdAt:new Date}:void 0}),x=async a=>{try{return await a.json()}catch(b){console.error("JSON parsing error:",{status:a.status,statusText:a.statusText,url:a.url,error:b});try{let b=await a.clone().text();console.error("Response that failed to parse:",{text:b.substring(0,500),contentType:a.headers.get("content-type")})}catch(a){console.error("Could not get response text after JSON parse error:",a)}throw Error(`Failed to parse JSON response: ${b instanceof Error?b.message:"Unknown parsing error"}`)}},y=async(b,c,d)=>(l.current?console.log("Sync already in progress, waiting for it to complete"):l.current=(async()=>{try{let c=await b.getIdToken(!0);(0,h.setAuthToken)(c),(await a.A(32453)).default.defaults.headers.common.Authorization=`Bearer ${c}`;let e=localStorage.getItem("selectedPlan"),g=localStorage.getItem("planSource"),i=localStorage.getItem("joinWaitlist"),j=localStorage.getItem("accessCode"),k=d||b.displayName||b.email?.split("@")[0];console.log("Making backend sync request",{endpoint:"/api/google-auth",domain:window.location.hostname,username:k,selectedPlan:e,planSource:g,joinWaitlist:i,accessCode:j});let l=await fetch("/api/google-auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},credentials:"include",body:JSON.stringify({email:b.email,username:k,firebaseUid:b.uid,selectedPlan:e,planSource:g,joinWaitlist:"true"===i,accessCode:j})});if(!l.ok){let a;try{a=await l.text()}catch(b){a="Could not read error response"}throw console.error("Backend sync error response:",{status:l.status,statusText:l.statusText,responseText:a}),Error(`Failed to sync with backend: ${l.status}`)}console.log("Successfully synced with backend");try{let a=await x(l);f.queryClient.setQueryData(["/api/user"],a),e&&(localStorage.removeItem("selectedPlan"),localStorage.removeItem("planSource"),localStorage.removeItem("joinWaitlist"),console.log("Cleaned up plan selection from localStorage")),j&&(localStorage.removeItem("accessCode"),console.log("Cleaned up access code from localStorage"))}catch(a){throw console.error("Error parsing user data from sync response:",a),Error("Failed to parse user data from backend response")}}catch(a){throw console.error("Error syncing with backend:",{error:a,domain:window.location.hostname,environment:"production"}),a}finally{l.current=null}})(),l.current);(0,c.useEffect)(()=>{let b;if(void 0!==s){if(t){console.log("AI Test Mode enabled - skipping Firebase initialization"),n(!0);return}return(0,h.loadFirebase)().then(async c=>{r(c);let{onAuthStateChanged:d}=await a.A(19135);b=d(c.auth,async b=>{if(console.log("Firebase auth state changed:",b?.email),p(b?.emailVerified??!1),b?.email)try{let c=await b.getIdToken(!0);(0,h.setAuthToken)(c),(await a.A(32453)).default.defaults.headers.common.Authorization=`Bearer ${c}`;let d=f.queryClient.getQueryData(["/api/user"]);d&&d.email===b.email||await y(b)}catch(a){console.error("Error during auth state sync:",a),f.queryClient.setQueryData(["/api/user"],null)}else{if(!localStorage.getItem("authToken")){(0,h.setAuthToken)(null);let b=(await a.A(32453)).default;delete b.defaults.headers.common.Authorization}f.queryClient.setQueryData(["/api/user"],null)}n(!0)})}).catch(a=>{console.error("Failed to load Firebase:",a),n(!0)}),()=>{b&&b()}}},[s,t]);let z=(0,e.useMutation)({mutationFn:async()=>{localStorage.removeItem("authToken");let b=(await a.A(32453)).default;delete b.defaults.headers.common.Authorization;try{await b.post("/api/logout")}catch(a){console.log("Backend logout failed, continuing with Firebase logout")}if(q?.auth)try{let{signOut:b}=await a.A(19135);await b(q.auth)}catch(a){throw console.error("Firebase sign out error:",a),a}},onSuccess:()=>{f.queryClient.setQueryData(["/api/user"],null)},onError:a=>{k({title:"Logout failed",description:a.message,variant:"destructive"})}}),A=async(b,c)=>{try{if(!q)throw console.error("Firebase not initialized"),Error("Authentication service is not ready. Please try again.");console.log("Starting email sign-in process",{email:b.split("@")[0]+"@...",timestamp:new Date().toISOString()});let{signInWithEmailAndPassword:d}=await a.A(19135),e=await d(q.auth,b,c);if(!e.user?.email)throw Error("No email available after sign-in");console.log("Email sign-in successful, syncing with backend"),await y(e.user)}catch(b){console.error("Email sign-in error:",{error:b.message,code:b.code});let a="Please try again";throw"auth/user-not-found"===b.code||"auth/wrong-password"===b.code?a="Invalid email or password":"auth/too-many-requests"===b.code&&(a="Too many attempts. Please try again later"),k({title:"Sign-in failed",description:a,variant:"destructive"}),b}},B=async(b,c,d)=>{try{if(!q)throw console.error("Firebase not initialized"),Error("Authentication service is not ready. Please try again.");console.log("Starting email registration process",{email:b.split("@")[0]+"@...",username:d||"not provided",timestamp:new Date().toISOString()});let{createUserWithEmailAndPassword:e,updateProfile:f,sendEmailVerification:g}=await a.A(19135),h=await e(q.auth,b,c);if(!h.user?.email)throw Error("No email available after registration");d&&h.user&&await f(h.user,{displayName:d});try{await g(h.user),console.log("Verification email sent")}catch(a){console.error("Failed to send verification email:",a)}console.log("Email registration successful, syncing with backend"),await y(h.user,null,d)}catch(a){if(console.error("Email registration error:",{error:a.message,code:a.code}),"auth/email-already-in-use"!==a.code){let b="Please try again";"auth/weak-password"===a.code?b="Password is too weak. Please use a stronger password":"auth/invalid-email"===a.code&&(b="Invalid email address"),k({title:"Registration failed",description:b,variant:"destructive"})}throw a}},C=async()=>{try{if(console.log("Starting Google sign-in process",{environment:"production",domain:window.location.hostname,origin:window.location.origin}),!q){let a={firebase:!!q,projectId:"fire-5-ducks",environment:"production",domain:window.location.hostname};throw console.error("Firebase not initialized:",a),Error("Authentication service is not ready. Please try again.")}q.googleProvider.setCustomParameters({prompt:"select_account"}),console.log("Calling signInWithPopup...");let{signInWithPopup:b,getAdditionalUserInfo:c,GoogleAuthProvider:d}=await a.A(19135),e=await b(q.auth,q.googleProvider),f=c(e),g=f?.isNewUser??!1,h=d.credentialFromResult(e);if(!e.user?.email)throw Error("No email provided from Google sign-in");return console.log("Google sign-in successful, syncing with backend",{email:e.user.email.split("@")[0]+"@...",displayName:e.user.displayName,isNewUser:g}),await y(e.user,h),{isNewUser:g}}catch(a){throw console.error("Google sign-in error:",{error:a.message,code:a.code,domain:window.location.hostname,environment:"production"}),k({title:"Google Sign-in failed",description:"auth/popup-blocked"===a.code?"Please allow popups for this site and try again":"Please try again or use email/password login",variant:"destructive"}),a}},D=t?{id:1,email:"guest@5ducks.ai",username:"Guest User",password:"",createdAt:new Date,isGuest:!1}:u??null;return(0,b.jsx)(i.Provider,{value:{user:D,isLoading:w&&!t,authReady:!!t||m,error:t?null:v,emailVerified:!!t||o,logoutMutation:z,signInWithGoogle:C,signInWithEmail:A,registerWithEmail:B},children:j})}function k(){let a=(0,c.useContext)(i);if(!a)throw Error("useAuth must be used within an AuthProvider");return a}a.s(["AuthProvider",()=>j,"useAuth",()=>k])}];

//# sourceMappingURL=_fc49af39._.js.map