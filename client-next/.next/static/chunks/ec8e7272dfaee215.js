(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9476,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(12598),a=e.i(84923),i=e.i(5743),o=e.i(94318),n=e.i(10704),l=e.i(6625),d=e.i(71689),c=e.i(37727),u=e.i(69604),m=e.i(58260);e.i(51402);var p=e.i(15762);function h(){let{isOpen:s,closeModal:a,initialPage:i}=(0,n.useRegistrationModal)(),[h,x]=(0,r.useState)("email"),[f,v]=(0,r.useState)(""),[g,w]=(0,r.useState)(""),[b,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),k=(0,r.useRef)(null),T=(0,r.useRef)(null),P=(0,r.useRef)(null),R=(0,r.useRef)(null),{user:S,signInWithGoogle:A,signInWithEmail:L}=(0,o.useAuth)(),{toast:F}=(0,m.useToast)();(0,r.useEffect)(()=>{S&&s&&a()},[S,s,a]),(0,r.useEffect)(()=>{s&&("login"===i?x("login"):x("email"))},[s,i]),(0,r.useEffect)(()=>{if(s)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}},[s]),(0,r.useEffect)(()=>{s&&("email"===h?setTimeout(()=>k.current?.focus(),100):"login"===h&&setTimeout(()=>R.current?.focus(),100))},[h,s]);let D=e=>{let t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);return N(t),t},I=e=>{let t=e.target.value;w(t),D(t)},M=async()=>{try{let{isNewUser:e}=await A();e&&(window.dataLayer?.push({event:"registration_complete"}),(0,p.sendAttributionToServer)().catch(()=>{}),(0,p.logConversionEvent)("registration_complete").catch(()=>{})),a()}catch(e){console.error("Google sign-in failed:",e)}},H=async()=>{if(!D(g)||!f.trim()||!b)return void F({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});if(b.length<8)return void F({title:"Password Too Short",description:"Password must be at least 8 characters",variant:"destructive"});E(!0);try{let{auth:t}=await (0,u.loadFirebase)(),{createUserWithEmailAndPassword:r,updateProfile:s}=await e.A(3975),i=await r(t,g,b);i.user&&await s(i.user,{displayName:f});let o=await i.user.getIdToken(!0);await fetch("/api/google-auth",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},credentials:"include",body:JSON.stringify({email:i.user.email,username:f,firebaseUid:i.user.uid})}),window.dataLayer?.push({event:"registration_complete"}),(0,p.sendAttributionToServer)().catch(()=>{}),(0,p.logConversionEvent)("registration_complete").catch(()=>{}),F({title:"Account Created!",description:"Welcome aboard!"}),a()}catch(e){console.error("Registration error:",e),"auth/email-already-in-use"===e.code?(F({title:"Account Already Exists",description:"This email is already registered. Please use the login option.",variant:"destructive"}),x("login")):"auth/invalid-email"===e.code?F({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"}):"auth/weak-password"===e.code?F({title:"Weak Password",description:"Please choose a stronger password",variant:"destructive"}):F({title:"Registration Failed",description:e.message||"Please try again.",variant:"destructive"})}finally{E(!1)}},K=async()=>{if(D(g)&&b)try{await L(g,b),a()}catch(e){console.error("Login error:",e),F({title:"Login Failed",description:e.message||"Invalid email or password.",variant:"destructive"})}},B=async()=>{if(!D(g))return void F({title:"Enter Your Email",description:"Please enter your email address first",variant:"destructive"});try{let{auth:t}=await (0,u.loadFirebase)(),{sendPasswordResetEmail:r}=await e.A(3975);await r(t,g),F({title:"Reset Email Sent",description:"Check your inbox for password reset instructions"})}catch(e){F({title:"Reset Email Sent",description:"If an account exists, you'll receive reset instructions"})}},O=j&&f.trim().length>0&&b.length>=8;return s?(0,t.jsxs)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-0 sm:p-4",children:[(0,t.jsx)("div",{className:"absolute top-6 right-6 z-10",children:(0,t.jsx)("button",{onClick:a,className:"text-white/70 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full","aria-label":"Close modal",children:(0,t.jsx)(c.X,{className:"h-6 w-6"})})}),(0,t.jsx)("div",{className:"w-full max-w-full sm:max-w-md mx-auto relative",children:(0,t.jsxs)("div",{className:"p-8",children:["email"===h&&(0,t.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-5xl md:text-6xl lg:text-7xl font-bold mb-3 font-serif text-[hsl(25,55%,50%)]",children:"Sign up"}),(0,t.jsxs)("p",{className:"text-white/80 text-lg",children:["to UNLOCK ",(0,t.jsx)("span",{className:"font-semibold text-[hsl(25,55%,50%)]",children:"195"})," Credits"]})]}),(0,t.jsxs)("div",{className:"space-y-4 max-w-sm mx-auto px-2 sm:px-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{ref:k,type:"email",placeholder:"Email",className:"w-full p-4 bg-transparent border border-white/20 rounded-md text-white/70 placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-white/50 focus:text-white transition-colors",value:g,onChange:I}),j&&(0,t.jsx)("input",{ref:T,type:"text",placeholder:"Full Name",className:"w-full p-4 bg-transparent border border-white/20 rounded-md text-white/70 placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-white/50 focus:text-white transition-colors",value:f,onChange:e=>v(e.target.value)}),f.length>0&&(0,t.jsx)("input",{ref:P,type:"password",placeholder:"Password (min 8 characters)",className:"w-full p-4 bg-transparent border border-white/20 rounded-md text-white/70 placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-white/50 focus:text-white transition-colors",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O&&(e.preventDefault(),H())}}),g.length>0&&(0,t.jsx)(l.Button,{variant:"outline",className:`w-full justify-center transition-all duration-300 ${O?"bg-gradient-to-r from-blue-800 via-indigo-800 to-purple-800 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-700 text-white hover:text-white border-0 shadow-lg":"bg-transparent hover:bg-white/10 text-white border border-white/30 hover:border-white/50"}`,onClick:H,disabled:!O||C,children:C?(0,t.jsx)("span",{children:"Creating Account..."}):(0,t.jsx)("span",{className:"font-semibold",children:"GO →"})})]}),(0,t.jsx)("div",{className:"w-full border-t border-white/20"}),(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-center relative bg-white hover:bg-gray-100 text-gray-700 hover:text-gray-700 border border-gray-300 opacity-50 hover:opacity-100 transition-opacity",onClick:M,children:[(0,t.jsxs)("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),(0,t.jsx)("div",{className:"text-center mt-6 pt-5",children:(0,t.jsxs)("p",{className:"text-gray-400 text-sm",children:["Already have an account?"," ",(0,t.jsx)("button",{onClick:()=>x("login"),className:"text-blue-300 hover:text-blue-200 transition-colors font-medium",children:"Login"})]})})]})]}),"login"===h&&(0,t.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,t.jsx)("div",{className:"flex justify-start mb-4 sm:mb-6 px-2 sm:px-4",children:(0,t.jsxs)("button",{onClick:()=>{x("email"),y("")},className:"text-sm text-white hover:text-blue-300 transition-colors flex items-center gap-1 p-2",children:[(0,t.jsx)(d.ArrowLeft,{className:"h-4 w-4"}),"Back"]})}),(0,t.jsxs)("div",{className:"text-center text-white mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-3",children:"Welcome Back"}),(0,t.jsx)("p",{className:"text-gray-200 text-lg",children:"Log in to your account"})]}),(0,t.jsxs)("div",{className:"space-y-4 max-w-sm mx-auto px-2 sm:px-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("input",{ref:R,type:"email",placeholder:"Email",className:"w-full p-4 bg-transparent border border-white/20 rounded-md text-white/70 placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-white/50 focus:text-white transition-colors",value:g,onChange:I}),(0,t.jsx)("input",{type:"password",placeholder:"Password",className:"w-full p-4 bg-transparent border border-white/20 rounded-md text-white/70 placeholder-gray-500 focus:outline-none focus:bg-white/10 focus:border-white/50 focus:text-white transition-colors",value:b,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),K())}}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsx)("button",{type:"button",onClick:B,className:"text-sm text-blue-300 hover:text-blue-200 transition-colors",children:"Forgot password?"})}),(0,t.jsx)(l.Button,{variant:"outline",className:`w-full justify-center transition-all duration-300 ${j&&b.length>0?"bg-gradient-to-r from-blue-800 via-indigo-800 to-purple-800 hover:from-blue-700 hover:via-indigo-700 hover:to-purple-700 text-white hover:text-white border-0 shadow-lg":"bg-transparent hover:bg-white/10 text-white border border-white/30 hover:border-white/50"}`,onClick:K,disabled:!j||0===b.length,children:"Sign In"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-white/20"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-black/70 text-gray-400",children:"OR"})})]}),(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-center relative bg-white hover:bg-gray-100 text-gray-700 border border-gray-300",onClick:M,children:[(0,t.jsxs)("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,t.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,t.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,t.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]})]})]})})]}):null}function x(){let{isOpen:e}=(0,n.useRegistrationModal)();return e?(0,t.jsx)(h,{}):null}e.i(37014),e.i(95654);var f=e.i(82802);e.i(56813);var v=e.i(72039),g=e.i(62311),w=e.i(11376),b=e.i(75822),y=e.i(66027),j=e.i(84589),N=e.i(39312),C=e.i(43553),E=e.i(43531),k=e.i(4766),T=e.i(52301);let P="5ducks_waitlist_plans";function R({onClose:e}){let{user:s}=(0,o.useAuth)(),{data:i}=(0,y.useQuery)({queryKey:["/api/stripe/subscription-status"],enabled:!!s}),{toast:n}=(0,m.useToast)(),[d,c]=(0,r.useState)(()=>(function(){try{let e=localStorage.getItem(P);return e?JSON.parse(e):[]}catch{return[]}})()),u=[{id:"ugly-duckling",name:"The Duckling",credits:5e3,bonus:3e3,regularPrice:82,price:18.95,icon:N.Zap,color:"from-blue-500 to-purple-600"},{id:"duckin-awesome",name:"Mama Duck",credits:1e4,bonus:12e3,regularPrice:174,price:44.95,icon:C.Crown,color:"from-purple-600 to-pink-600"}],p=async t=>{if(console.log(`Selected plan: ${t}`),"duckin-awesome"===t){if(!d.includes(t)){let e=[...d,t];c(e);try{localStorage.setItem(P,JSON.stringify(e))}catch{}n({title:"Added to Waitlist",description:"We'll notify you when Mama Duck becomes available!"})}return}if("ugly-duckling"===t)try{e?.();let r=await (0,a.apiRequest)("POST","/api/stripe/create-checkout-session",{planId:t}),s=await r.json();if(s.checkoutUrl)window.location.href=s.checkoutUrl;else throw Error("No checkout URL received")}catch(e){console.error("Stripe checkout error:",e),n({title:"Checkout Error",description:e.message||"Failed to start checkout process. Please try again.",variant:"destructive"})}},h=i?.hasSubscription&&i?.status==="active",x=i?.currentPlan;return(0,t.jsx)("div",{className:"space-y-4",children:u.map(e=>{let r,s=h&&x===e.id,a="duckin-awesome"===e.id,i=d.includes(e.id);return(0,t.jsxs)(k.Card,{"data-testid":`card-plan-${e.id}`,className:(0,T.cn)("relative transition-all duration-300 cursor-pointer hover:shadow-md hover:scale-[1.01] border shadow-md",s?"border-green-300 bg-green-50/50 dark:bg-green-950/20 dark:border-green-700":"border-border hover:border-blue-200 dark:hover:border-blue-800"),onClick:()=>!s&&p(e.id),children:[s&&(0,t.jsx)("div",{className:"absolute top-2 right-2",children:(0,t.jsx)("div",{className:"bg-green-500 text-white rounded-full p-1",children:(0,t.jsx)(E.Check,{className:"w-3 h-3"})})}),(0,t.jsxs)(k.CardContent,{className:"pt-3 px-3 pb-3",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center border border-border",children:(0,t.jsx)(e.icon,{className:"w-5 h-5 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-foreground",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-muted-foreground mb-2",children:[(0,t.jsxs)("span",{className:"font-medium",children:[e.credits.toLocaleString()," Credits"]}),(0,t.jsxs)("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[" + ",e.bonus.toLocaleString()," Bonus"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-foreground line-through",children:["$",e.regularPrice]}),(0,t.jsxs)("span",{className:(0,T.cn)("text-lg font-bold","text-red-700 dark:text-red-500"),children:["$",e.price]}),(0,t.jsxs)("span",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800/50 px-1.5 py-0.5 rounded",children:[Math.round(((r=e.regularPrice)-e.price)/r*100),"% off"]})]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Monthly"})]})]})]}),!s&&!i&&(0,t.jsx)(l.Button,{"data-testid":`button-select-plan-${e.id}`,className:(0,T.cn)("w-full mt-3 text-base group relative transition-all duration-300 transform hover:scale-102 hover:shadow-lg",a?"bg-gray-100 hover:bg-black hover:text-white text-black border-0":"bg-gradient-to-r from-accent-light to-accent hover:from-accent hover:to-accent-dark text-white border-0 shadow-md hover:shadow-lg"),onClick:t=>{t.stopPropagation(),p(e.id)},children:a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"transition-all duration-700 delay-1000 group-hover:opacity-0 group-hover:scale-95",children:"Join Waitlist"}),(0,t.jsx)("span",{className:"absolute transition-all duration-700 delay-1000 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100",children:"Coming Soon"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"transition-all duration-700 delay-1000 group-hover:opacity-0 group-hover:scale-95",children:"Upgrade"}),(0,t.jsx)("span",{className:"absolute transition-all duration-700 delay-1000 opacity-0 scale-95 group-hover:opacity-100 group-hover:scale-100",children:"Let's Go"})]})}),i&&(0,t.jsx)("div",{className:"mt-3 text-center",children:(0,t.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium",children:"Added to Waitlist"})}),s&&(0,t.jsx)("div",{className:"mt-3 text-center",children:(0,t.jsx)("span",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"Current Plan"})})]})]},e.id)})})}function S(){let{isOpen:e,closeModal:r}=(0,w.useInsufficientCredits)(),{user:s}=(0,o.useAuth)(),{data:a}=(0,y.useQuery)({queryKey:["/api/credits"],enabled:!!s&&e}),{data:i}=(0,y.useQuery)({queryKey:["/api/stripe/subscription-status"],enabled:!!s&&e}),n=i?.hasSubscription&&i?.status==="active",d=i?.currentPlan;return(0,t.jsx)(j.Dialog,{open:e,onOpenChange:e=>!e&&r(),children:(0,t.jsxs)(j.DialogContent,{className:"sm:max-w-md p-0 bg-background border shadow-2xl overflow-hidden","data-testid":"modal-insufficient-credits",children:[(0,t.jsx)(j.DialogHeader,{className:"bg-gradient-to-r from-muted/50 to-muted/30 p-4 border-b",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(b.Coins,{className:(0,T.cn)("h-5 w-5",(a?.balance??0)>=1?"text-yellow-500":"text-red-600")}),(0,t.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,t.jsxs)("p",{className:"font-semibold text-foreground",children:[(a?.balance??0).toLocaleString()," Credits"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current balance"})]})]})}),(0,t.jsxs)("div",{className:"px-4 pt-4 pb-2 text-center",children:[(0,t.jsx)(j.DialogTitle,{className:"font-semibold text-foreground text-lg mb-1",children:n?"ugly-duckling"===d?"Time to upgrade!":"You've run out of credits":"You need more credits"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:n?"ugly-duckling"===d?"Upgrade to Mama Duck for 4x more credits + a bigger bonus":"Your credits will refresh next month":"Choose a plan to unlock more credits and keep selling"})]}),(0,t.jsx)("div",{className:"px-4 pb-2",children:(0,t.jsx)(R,{onClose:r})}),(0,t.jsxs)("div",{className:"px-4 py-3 bg-muted/30 text-center border-t",children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:"Plans auto-renew monthly. Cancel anytime."}),(0,t.jsx)(l.Button,{variant:"link",size:"sm",onClick:()=>{r(),window.open("/pricing","_blank")},className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 h-auto p-0 font-medium","data-testid":"link-pricing-details",children:"See full details and features →"})]})]})})}var A=e.i(62156);function L(){let{triggerInsufficientCredits:e,cleanup:t}=(0,A.useInsufficientCreditsHandler)();return(0,r.useEffect)(()=>((0,A.setGlobalInsufficientCreditsTrigger)(e),()=>{(0,A.setGlobalInsufficientCreditsTrigger)(null),t()}),[e,t]),null}var F=e.i(74080),D=e.i(81140),I=e.i(20783),M=e.i(75830),H=e.i(30030),K=e.i(26330),B=e.i(74606),O=e.i(96626),$=e.i(48425),z=e.i(30207),U=e.i(69340),_=e.i(34620),q=e.i(59411),V="ToastProvider",[W,G,Y]=(0,M.createCollection)("Toast"),[X,J]=(0,H.createContextScope)("Toast",[Y]),[Q,Z]=X(V),ee=e=>{let{__scopeToast:s,label:a="Notification",duration:i=5e3,swipeDirection:o="right",swipeThreshold:n=50,children:l}=e,[d,c]=r.useState(null),[u,m]=r.useState(0),p=r.useRef(!1),h=r.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${V}\`. Expected non-empty \`string\`.`),(0,t.jsx)(W.Provider,{scope:s,children:(0,t.jsx)(Q,{scope:s,label:a,duration:i,swipeDirection:o,swipeThreshold:n,toastCount:u,viewport:d,onViewportChange:c,onToastAdd:r.useCallback(()=>m(e=>e+1),[]),onToastRemove:r.useCallback(()=>m(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:h,children:l})})};ee.displayName=V;var et="ToastViewport",er=["F8"],es="toast.viewportPause",ea="toast.viewportResume",ei=r.forwardRef((e,s)=>{let{__scopeToast:a,hotkey:i=er,label:o="Notifications ({hotkey})",...n}=e,l=Z(et,a),d=G(a),c=r.useRef(null),u=r.useRef(null),m=r.useRef(null),p=r.useRef(null),h=(0,I.useComposedRefs)(s,p,l.onViewportChange),x=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=l.toastCount>0;r.useEffect(()=>{let e=e=>{0!==i.length&&i.every(t=>e[t]||e.code===t)&&p.current?.focus()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[i]),r.useEffect(()=>{let e=c.current,t=p.current;if(f&&e&&t){let r=()=>{if(!l.isClosePausedRef.current){let e=new CustomEvent(es);t.dispatchEvent(e),l.isClosePausedRef.current=!0}},s=()=>{if(l.isClosePausedRef.current){let e=new CustomEvent(ea);t.dispatchEvent(e),l.isClosePausedRef.current=!1}},a=t=>{e.contains(t.relatedTarget)||s()},i=()=>{e.contains(document.activeElement)||s()};return e.addEventListener("focusin",r),e.addEventListener("focusout",a),e.addEventListener("pointermove",r),e.addEventListener("pointerleave",i),window.addEventListener("blur",r),window.addEventListener("focus",s),()=>{e.removeEventListener("focusin",r),e.removeEventListener("focusout",a),e.removeEventListener("pointermove",r),e.removeEventListener("pointerleave",i),window.removeEventListener("blur",r),window.removeEventListener("focus",s)}}},[f,l.isClosePausedRef]);let v=r.useCallback(({tabbingDirection:e})=>{let t=d().map(t=>{let r=t.ref.current,s=[r,...function(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}(r)];return"forwards"===e?s:s.reverse()});return("forwards"===e?t.reverse():t).flat()},[d]);return r.useEffect(()=>{let e=p.current;if(e){let t=t=>{let r=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!r){let r=document.activeElement,s=t.shiftKey;if(t.target===e&&s)return void u.current?.focus();let a=v({tabbingDirection:s?"backwards":"forwards"}),i=a.findIndex(e=>e===r);eN(a.slice(i+1))?t.preventDefault():s?u.current?.focus():m.current?.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[d,v]),(0,t.jsxs)(K.Branch,{ref:c,role:"region","aria-label":o.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&(0,t.jsx)(en,{ref:u,onFocusFromOutsideViewport:()=>{eN(v({tabbingDirection:"forwards"}))}}),(0,t.jsx)(W.Slot,{scope:a,children:(0,t.jsx)($.Primitive.ol,{tabIndex:-1,...n,ref:h})}),f&&(0,t.jsx)(en,{ref:m,onFocusFromOutsideViewport:()=>{eN(v({tabbingDirection:"backwards"}))}})]})});ei.displayName=et;var eo="ToastFocusProxy",en=r.forwardRef((e,r)=>{let{__scopeToast:s,onFocusFromOutsideViewport:a,...i}=e,o=Z(eo,s);return(0,t.jsx)(q.VisuallyHidden,{"aria-hidden":!0,tabIndex:0,...i,ref:r,style:{position:"fixed"},onFocus:e=>{let t=e.relatedTarget;o.viewport?.contains(t)||a()}})});en.displayName=eo;var el="Toast",ed=r.forwardRef((e,r)=>{let{forceMount:s,open:a,defaultOpen:i,onOpenChange:o,...n}=e,[l=!0,d]=(0,U.useControllableState)({prop:a,defaultProp:i,onChange:o});return(0,t.jsx)(O.Presence,{present:s||l,children:(0,t.jsx)(em,{open:l,...n,ref:r,onClose:()=>d(!1),onPause:(0,z.useCallbackRef)(e.onPause),onResume:(0,z.useCallbackRef)(e.onResume),onSwipeStart:(0,D.composeEventHandlers)(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:(0,D.composeEventHandlers)(e.onSwipeMove,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${r}px`)}),onSwipeCancel:(0,D.composeEventHandlers)(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:(0,D.composeEventHandlers)(e.onSwipeEnd,e=>{let{x:t,y:r}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${r}px`),d(!1)})})})});ed.displayName=el;var[ec,eu]=X(el,{onClose(){}}),em=r.forwardRef((e,s)=>{let{__scopeToast:a,type:i="foreground",duration:o,open:n,onClose:l,onEscapeKeyDown:d,onPause:c,onResume:u,onSwipeStart:m,onSwipeMove:p,onSwipeCancel:h,onSwipeEnd:x,...f}=e,v=Z(el,a),[g,w]=r.useState(null),b=(0,I.useComposedRefs)(s,e=>w(e)),y=r.useRef(null),j=r.useRef(null),N=o||v.duration,C=r.useRef(0),E=r.useRef(N),k=r.useRef(0),{onToastAdd:T,onToastRemove:P}=v,R=(0,z.useCallbackRef)(()=>{g?.contains(document.activeElement)&&v.viewport?.focus(),l()}),S=r.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(k.current),C.current=new Date().getTime(),k.current=window.setTimeout(R,e))},[R]);r.useEffect(()=>{let e=v.viewport;if(e){let t=()=>{S(E.current),u?.()},r=()=>{let e=new Date().getTime()-C.current;E.current=E.current-e,window.clearTimeout(k.current),c?.()};return e.addEventListener(es,r),e.addEventListener(ea,t),()=>{e.removeEventListener(es,r),e.removeEventListener(ea,t)}}},[v.viewport,N,c,u,S]),r.useEffect(()=>{n&&!v.isClosePausedRef.current&&S(N)},[n,N,v.isClosePausedRef,S]),r.useEffect(()=>(T(),()=>P()),[T,P]);let A=r.useMemo(()=>g?function e(t){let r=[];return Array.from(t.childNodes).forEach(t=>{var s;if(t.nodeType===t.TEXT_NODE&&t.textContent&&r.push(t.textContent),(s=t).nodeType===s.ELEMENT_NODE){let s=t.ariaHidden||t.hidden||"none"===t.style.display,a=""===t.dataset.radixToastAnnounceExclude;if(!s)if(a){let e=t.dataset.radixToastAnnounceAlt;e&&r.push(e)}else r.push(...e(t))}}),r}(g):null,[g]);return v.viewport?(0,t.jsxs)(t.Fragment,{children:[A&&(0,t.jsx)(ep,{__scopeToast:a,role:"status","aria-live":"foreground"===i?"assertive":"polite","aria-atomic":!0,children:A}),(0,t.jsx)(ec,{scope:a,onClose:R,children:F.createPortal((0,t.jsx)(W.ItemSlot,{scope:a,children:(0,t.jsx)(K.Root,{asChild:!0,onEscapeKeyDown:(0,D.composeEventHandlers)(d,()=>{v.isFocusedToastEscapeKeyDownRef.current||R(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:(0,t.jsx)($.Primitive.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":n?"open":"closed","data-swipe-direction":v.swipeDirection,...f,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:(0,D.composeEventHandlers)(e.onKeyDown,e=>{"Escape"===e.key&&(d?.(e.nativeEvent),e.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:(0,D.composeEventHandlers)(e.onPointerDown,e=>{0===e.button&&(y.current={x:e.clientX,y:e.clientY})}),onPointerMove:(0,D.composeEventHandlers)(e.onPointerMove,e=>{if(!y.current)return;let t=e.clientX-y.current.x,r=e.clientY-y.current.y,s=!!j.current,a=["left","right"].includes(v.swipeDirection),i=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,o=a?i(0,t):0,n=a?0:i(0,r),l="touch"===e.pointerType?10:2,d={x:o,y:n},c={originalEvent:e,delta:d};s?(j.current=d,ey("toast.swipeMove",p,c,{discrete:!1})):ej(d,v.swipeDirection,l)?(j.current=d,ey("toast.swipeStart",m,c,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(r)>l)&&(y.current=null)}),onPointerUp:(0,D.composeEventHandlers)(e.onPointerUp,e=>{let t=j.current,r=e.target;if(r.hasPointerCapture(e.pointerId)&&r.releasePointerCapture(e.pointerId),j.current=null,y.current=null,t){let r=e.currentTarget,s={originalEvent:e,delta:t};ej(t,v.swipeDirection,v.swipeThreshold)?ey("toast.swipeEnd",x,s,{discrete:!0}):ey("toast.swipeCancel",h,s,{discrete:!0}),r.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),ep=e=>{let{__scopeToast:s,children:a,...i}=e,o=Z(el,s),[n,l]=r.useState(!1),[d,c]=r.useState(!1);return function(e=()=>{}){let t=(0,z.useCallbackRef)(e);(0,_.useLayoutEffect)(()=>{let e=0,r=0;return e=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(r)}},[t])}(()=>l(!0)),r.useEffect(()=>{let e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),d?null:(0,t.jsx)(B.Portal,{asChild:!0,children:(0,t.jsx)(q.VisuallyHidden,{...i,children:n&&(0,t.jsxs)(t.Fragment,{children:[o.label," ",a]})})})},eh=r.forwardRef((e,r)=>{let{__scopeToast:s,...a}=e;return(0,t.jsx)($.Primitive.div,{...a,ref:r})});eh.displayName="ToastTitle";var ex=r.forwardRef((e,r)=>{let{__scopeToast:s,...a}=e;return(0,t.jsx)($.Primitive.div,{...a,ref:r})});ex.displayName="ToastDescription";var ef="ToastAction",ev=r.forwardRef((e,r)=>{let{altText:s,...a}=e;return s.trim()?(0,t.jsx)(eb,{altText:s,asChild:!0,children:(0,t.jsx)(ew,{...a,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${ef}\`. Expected non-empty \`string\`.`),null)});ev.displayName=ef;var eg="ToastClose",ew=r.forwardRef((e,r)=>{let{__scopeToast:s,...a}=e,i=eu(eg,s);return(0,t.jsx)(eb,{asChild:!0,children:(0,t.jsx)($.Primitive.button,{type:"button",...a,ref:r,onClick:(0,D.composeEventHandlers)(e.onClick,i.onClose)})})});ew.displayName=eg;var eb=r.forwardRef((e,r)=>{let{__scopeToast:s,altText:a,...i}=e;return(0,t.jsx)($.Primitive.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...i,ref:r})});function ey(e,t,r,{discrete:s}){let a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?(0,$.dispatchDiscreteCustomEvent)(a,i):a.dispatchEvent(i)}var ej=(e,t,r=0)=>{let s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return"left"===t||"right"===t?i&&s>r:!i&&a>r};function eN(e){let t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var eC=e.i(25913);let eE=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(ei,{ref:s,className:(0,T.cn)("fixed bottom-0 right-0 z-[100] flex max-h-screen w-full flex-col-reverse p-2 sm:p-4 sm:bottom-0 sm:right-0 sm:w-auto sm:max-w-[380px]",e),...r}));eE.displayName=ei.displayName;let ek=(0,eC.cva)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-3 sm:p-4 pr-6 sm:pr-8 max-w-[90vw] sm:max-w-md shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=open]:duration-300 data-[state=closed]:animate-out data-[state=closed]:duration-200 data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-bottom-full",{variants:{variant:{default:"border-l-4 border-l-emerald-500 border-y-0 border-r-0 bg-gradient-to-r from-emerald-50 to-background text-foreground",destructive:"border-l-4 border-l-red-500 border-y-0 border-r-0 bg-gradient-to-r from-red-50 to-background text-foreground",info:"border-l-4 border-l-blue-500 border-y-0 border-r-0 bg-gradient-to-r from-blue-50 to-background text-foreground"}},defaultVariants:{variant:"default"}}),eT=r.forwardRef(({className:e,variant:r,...s},a)=>(0,t.jsx)(ed,{ref:a,className:(0,T.cn)(ek({variant:r}),e),...s}));eT.displayName=ed.displayName,r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(ev,{ref:s,className:(0,T.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...r})).displayName=ev.displayName;let eP=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(ew,{ref:s,className:(0,T.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:(0,t.jsx)(c.X,{className:"h-4 w-4"})}));eP.displayName=ew.displayName;let eR=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(eh,{ref:s,className:(0,T.cn)("text-sm sm:text-base font-semibold leading-tight",e),...r}));eR.displayName=eh.displayName;let eS=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(ex,{ref:s,className:(0,T.cn)("text-xs sm:text-sm opacity-90 leading-snug",e),...r}));eS.displayName=ex.displayName;var eA=e.i(69638),eL=e.i(63209),eF=e.i(52571);function eD(){let{toasts:e}=(0,m.useToast)();return(0,t.jsxs)(ee,{children:[e.map(function({id:e,title:r,description:s,action:a,variant:i,...o}){return(0,t.jsxs)(eT,{variant:i,...o,children:[(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("div",{className:"mr-3 flex-shrink-0 mt-0.5",children:"destructive"===i?(0,t.jsx)(eL.AlertCircle,{className:"h-5 w-5 text-red-500"}):"info"===i?(0,t.jsx)(eF.Info,{className:"h-5 w-5 text-blue-500"}):(0,t.jsx)(eA.CheckCircle,{className:"h-5 w-5 text-emerald-500"})}),(0,t.jsxs)("div",{className:"grid gap-1",children:[r&&(0,t.jsx)(eR,{children:r}),s&&(0,t.jsx)(eS,{children:s})]})]}),a,(0,t.jsx)(eP,{})]},e)}),(0,t.jsx)(eE,{})]})}var eI=e.i(18566);let eM=["/app","/app/new-search","/search","/quests","/contacts","/campaigns","/replies","/account","/strategy","/companies","/admin"];function eH(){let[s,a]=(0,r.useState)(null),i=(0,eI.usePathname)();return((0,r.useEffect)(()=>{if(!eM.some(e=>i===e||i.startsWith(e+"/"))||s)return;let t=()=>{e.A(79925).then(e=>{a(()=>e.GuidanceProvider)}).catch(e=>{console.error("Failed to load guidance engine:",e)})};if("requestIdleCallback"in window){let e=window.requestIdleCallback(t,{timeout:5e3});return()=>window.cancelIdleCallback(e)}{let e=setTimeout(t,3e3);return()=>clearTimeout(e)}},[i,s]),s)?(0,t.jsx)(s,{autoStartForNewUsers:!0,children:(0,t.jsx)(t.Fragment,{})}):null}function eK({children:e}){return(0,t.jsx)(s.QueryClientProvider,{client:a.queryClient,children:(0,t.jsx)(i.ThemeProvider,{children:(0,t.jsx)(w.InsufficientCreditsProvider,{children:(0,t.jsxs)(o.AuthProvider,{children:[(0,t.jsxs)(n.RegistrationModalProvider,{children:[(0,t.jsx)(f.StrategyOverlayProvider,{children:(0,t.jsxs)(v.TopNavAdProvider,{children:[e,(0,t.jsx)(eH,{}),(0,t.jsx)(x,{}),(0,t.jsx)(g.PasswordSetupModal,{})]})}),(0,t.jsx)(eD,{})]}),(0,t.jsx)(S,{}),(0,t.jsx)(L,{})]})})})})}e.s(["Providers",()=>eK],9476)}]);