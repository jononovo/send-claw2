(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10790,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(66027),i=e.i(54616),r=e.i(4766),l=e.i(6625),n=e.i(32076),d=e.i(16112),o=e.i(33356),c=e.i(50741),m=e.i(84923),u=e.i(58260),x=e.i(45919),h=e.i(69394),p=e.i(61277),p=p,g=e.i(63488),f=e.i(39312),v=e.i(7486),j=e.i(25652),y=e.i(78917),b=e.i(16715);let N=(0,e.i(75254).default)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);var w=e.i(52301),C=e.i(94318),T=e.i(48819),S=e.i(84589),k=e.i(37880),D=e.i(90250),P=e.i(71689),A=e.i(72520),M=e.i(20278),E=e.i(69638);function I({open:e,onClose:s,onComplete:r}){let{toast:d}=(0,u.useToast)(),[o,c]=(0,a.useState)(1),[x,h]=(0,a.useState)({exampleCompany:"",searchPrompt:"",additionalContext:""}),p=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("POST","/api/customer-profiles",{title:e.searchPrompt.slice(0,50),exampleCompany:e.exampleCompany,searchPrompt:e.searchPrompt,additionalContext:e.additionalContext,industry:e.searchPrompt.split(" ").slice(0,2).join(" "),companySize:""})).json(),onSuccess:e=>{m.queryClient.invalidateQueries({queryKey:["/api/customer-profiles"]}),d({title:"Customer profile created",description:"Your ideal customer profile has been saved"}),r&&r(e?.id),g()},onError:()=>{d({title:"Error",description:"Failed to save customer profile",variant:"destructive"})}}),g=()=>{c(1),h({exampleCompany:"",searchPrompt:"",additionalContext:""}),s()};return(0,t.jsx)(S.Dialog,{open:e,onOpenChange:e=>!e&&g(),children:(0,t.jsxs)(S.DialogContent,{className:"sm:max-w-[500px]",children:[(()=>{switch(o){case 1:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.DialogHeader,{children:[(0,t.jsx)(S.DialogTitle,{className:"text-2xl",children:"Who's your ideal customer?"}),(0,t.jsx)(S.DialogDescription,{className:"text-base",children:"Let's define your target audience"})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"example-company",children:"Name a specific company who is a customer, or is very realistic for you to sell to"}),(0,t.jsx)(k.Input,{id:"example-company",value:x.exampleCompany,onChange:e=>h(t=>({...t,exampleCompany:e.target.value})),placeholder:"e.g., Marriott Hotels, Tesla, Local Coffee Shop","data-testid":"input-example-company"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"This helps us understand your target market"})]})})]});case 2:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.DialogHeader,{children:[(0,t.jsx)(S.DialogTitle,{className:"text-2xl",children:"Search for similar companies"}),(0,t.jsx)(S.DialogDescription,{className:"text-base",children:"Create a specific search prompt for finding prospects"})]}),(0,t.jsx)("div",{className:"space-y-4 py-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"search-prompt",children:"Provide a prompt for finding companies that need your product/service"}),(0,t.jsx)(D.Textarea,{id:"search-prompt",value:x.searchPrompt,onChange:e=>h(t=>({...t,searchPrompt:e.target.value})),placeholder:'e.g., "4-star seaside hotels in Florida" or "Family-friendly restaurants in Miami"',className:"min-h-[80px]","data-testid":"textarea-search-prompt"}),(0,t.jsxs)("div",{className:"p-3 bg-secondary rounded-lg",children:[(0,t.jsx)("p",{className:"text-xs font-medium mb-1",children:"ðŸ’¡ Make it more specific:"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'â€¢ Add a city or community (e.g., "in downtown Boston")'}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'â€¢ Include a niche (e.g., "luxury", "eco-friendly", "budget")'}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:'â€¢ Be specific about size (e.g., "10-50 employees")'})]})]})})]});case 3:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(S.DialogHeader,{children:[(0,t.jsx)(S.DialogTitle,{className:"text-2xl",children:"Additional context"}),(0,t.jsx)(S.DialogDescription,{className:"text-base",children:"Any special circumstances we should know?"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"context",children:"Is there a specific time, season, or use case when companies need your product?"}),(0,t.jsx)(D.Textarea,{id:"context",value:x.additionalContext,onChange:e=>h(t=>({...t,additionalContext:e.target.value})),placeholder:"e.g., Hotels need our service during peak tourist season, or companies preparing for trade shows need our displays",className:"min-h-[100px]","data-testid":"textarea-additional-context"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Optional - This helps us time your outreach perfectly"})]}),(0,t.jsx)("div",{className:"mt-6 p-4 bg-primary/10 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(E.CheckCircle,{className:"h-5 w-5 text-primary mt-0.5"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:"Ready to save!"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"We'll use this profile to find the perfect prospects for your outreach campaigns."})]})]})})]})]})}})(),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,t.jsx)("div",{className:"flex gap-2",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:`h-2 w-8 rounded-full transition-colors ${e<=o?"bg-primary":"bg-secondary"}`},e))}),(0,t.jsxs)("div",{className:"flex gap-2",children:[o>1&&(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>{c(o-1)},disabled:p.isPending,children:[(0,t.jsx)(P.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),o<3?(0,t.jsxs)(l.Button,{onClick:()=>{1!==o||x.exampleCompany.trim()?2!==o||x.searchPrompt.trim()?o<3&&c(o+1):d({title:"Please fill in the field",description:"Search prompt is required",variant:"destructive"}):d({title:"Please fill in the field",description:"Example company is required",variant:"destructive"})},"data-testid":"button-next",children:["Next",(0,t.jsx)(A.ArrowRight,{className:"h-4 w-4 ml-2"})]}):(0,t.jsx)(l.Button,{onClick:()=>{p.mutate(x)},disabled:p.isPending,"data-testid":"button-save-profile",children:p.isPending?(0,t.jsx)(t.Fragment,{children:"Saving..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.Target,{className:"h-4 w-4 mr-2"}),"Save Customer Profile"]})})]})]})]})})}var B=e.i(39813),F=e.i(18566),L=e.i(84614),z=e.i(7233),$=e.i(43531);function R({senderProfiles:e,selectedSenderProfileId:a,isLoading:s,onProfileChange:i,onAddProfile:n,user:d}){return(0,t.jsxs)(r.Card,{className:(0,w.cn)("relative transition-all duration-300 border-2",a?"border-primary bg-primary/5 shadow-lg":"hover:shadow-xl hover:border-primary/30"),children:[a&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 z-10",children:(0,t.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)($.Check,{className:"w-4 h-4 text-white"})})}),(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(L.User,{className:"h-4 w-4"}),"My Identity"]}),(0,t.jsx)(r.CardDescription,{className:"text-xs",children:"Who are you sending from?"})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:n,"data-testid":"button-add-sender-profile",children:(0,t.jsx)(z.Plus,{className:"h-3 w-3"})})]})}),(0,t.jsx)(r.CardContent,{className:"pt-0",children:s?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Loading..."}):e&&e.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.sort((e,t)=>e.isDefault&&!t.isDefault?-1:!e.isDefault&&t.isDefault?1:e.id-t.id).slice(0,3).map(e=>(0,t.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg border cursor-pointer transition-all",a===e.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"),onClick:()=>i(e.id),"data-testid":`sender-profile-${e.id}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-xs truncate",children:e.displayName}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.email}),e.title&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.title})]}),a===e.id&&(0,t.jsx)($.Check,{className:"h-3 w-3 text-primary flex-shrink-0"})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsxs)("div",{className:"p-2 bg-secondary rounded-lg mb-2",children:[(0,t.jsx)("div",{className:"font-medium text-xs truncate",children:d?.username||d?.email}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:d?.email})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Default profile created"})]})})]})}var U=e.i(88844);function O({products:e,selectedProductId:a,isLoading:s,onProductChange:i,onAddProduct:n}){return(0,t.jsxs)(r.Card,{className:(0,w.cn)("relative transition-all duration-300 border-2",a?"border-primary bg-primary/5 shadow-lg":"hover:shadow-xl hover:border-primary/30"),children:[a&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 z-10",children:(0,t.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)($.Check,{className:"w-4 h-4 text-white"})})}),(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(U.Package,{className:"h-4 w-4"}),"My Product"]}),(0,t.jsx)(r.CardDescription,{className:"text-xs",children:"What are you selling?"})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:n,"data-testid":"button-add-product",children:(0,t.jsx)(z.Plus,{className:"h-3 w-3"})})]})}),(0,t.jsx)(r.CardContent,{className:"pt-0",children:s?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Loading..."}):e&&e.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.sort((e,t)=>{let a=new Date(e.createdAt||0).getTime(),s=new Date(t.createdAt||0).getTime();return a!==s?s-a:e.id-t.id}).slice(0,3).map(e=>(0,t.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg border cursor-pointer transition-all",a===e.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"),onClick:()=>i(e.id),"data-testid":`product-${e.id}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-xs truncate",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.productService})]}),a===e.id&&(0,t.jsx)($.Check,{className:"h-3 w-3 text-primary flex-shrink-0"})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-16 w-16 rounded-full p-0",onClick:n,"data-testid":"button-create-product",children:(0,t.jsx)(z.Plus,{className:"h-8 w-8 text-muted-foreground/30"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Add your product"})]})})]})}var q=e.i(61911);function W({customerProfiles:e,selectedCustomerProfileId:a,isLoading:s,onProfileChange:i,onAddProfile:n}){return(0,t.jsxs)(r.Card,{className:(0,w.cn)("relative transition-all duration-300 border-2",a?"border-primary bg-primary/5 shadow-lg":"hover:shadow-xl hover:border-primary/30"),children:[a&&(0,t.jsx)("div",{className:"absolute -top-2 -right-2 z-10",children:(0,t.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)($.Check,{className:"w-4 h-4 text-white"})})}),(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(r.CardTitle,{className:"text-sm flex items-center gap-2",children:[(0,t.jsx)(q.Users,{className:"h-4 w-4"}),"Ideal Customer"]}),(0,t.jsx)(r.CardDescription,{className:"text-xs",children:"Who are you connecting with?"})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:n,"data-testid":"button-add-customer-profile",children:(0,t.jsx)(z.Plus,{className:"h-3 w-3"})})]})}),(0,t.jsx)(r.CardContent,{className:"pt-0",children:s?(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Loading..."}):e&&e.length>0?(0,t.jsx)("div",{className:"space-y-2",children:e.sort((e,t)=>e.id-t.id).slice(0,3).map(e=>(0,t.jsx)("div",{className:(0,w.cn)("p-2 rounded-lg border cursor-pointer transition-all",a===e.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"),onClick:()=>i(e.id),"data-testid":`customer-profile-${e.id}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-xs truncate",children:e.label}),e.industries&&e.industries.length>0&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.industries.join(", ")}),e.companySizes&&e.companySizes.length>0&&"All sizes"!==e.companySizes[0]&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.companySizes.join(", ")})]}),a===e.id&&(0,t.jsx)($.Check,{className:"h-3 w-3 text-primary flex-shrink-0"})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"sm",className:"h-16 w-16 rounded-full p-0",onClick:n,"data-testid":"button-create-customer-profile",children:(0,t.jsx)(z.Plus,{className:"h-8 w-8 text-muted-foreground/30"})}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Add ideal customer"})]})})]})}var Y=e.i(31343);function H({isEnabled:e,daysPerWeek:a,hasProduct:s,hasSenderProfile:i,hasCustomerProfile:n,onActivate:d,onDeactivate:o}){let{toast:c}=(0,u.useToast)();return(0,t.jsx)(r.Card,{className:(0,w.cn)("relative transition-all",e?"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800":"hover:shadow-lg"),children:(0,t.jsxs)(r.CardContent,{className:"flex flex-col items-center justify-center h-full min-h-[200px] p-4",children:[(0,t.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,t.jsx)("div",{className:(0,w.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all",i?"bg-green-100 dark:bg-green-900/50 border-2 border-green-500":"bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600"),children:i?(0,t.jsx)($.Check,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"1"})}),(0,t.jsx)("div",{className:(0,w.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all",s?"bg-green-100 dark:bg-green-900/50 border-2 border-green-500":"bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600"),children:s?(0,t.jsx)($.Check,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"2"})}),(0,t.jsx)("div",{className:(0,w.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-all",n?"bg-green-100 dark:bg-green-900/50 border-2 border-green-500":"bg-gray-100 dark:bg-gray-800 border-2 border-gray-300 dark:border-gray-600"),children:n?(0,t.jsx)($.Check,{className:"w-4 h-4 text-green-600 dark:text-green-400"}):(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"3"})})]}),e?(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/50 rounded-full flex items-center justify-center mb-3",children:(0,t.jsx)($.Check,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),(0,t.jsx)("p",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Campaign Active"}),(0,t.jsxs)("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["Sending ",a," days/week"]}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",className:"mt-3",onClick:o,children:"Pause Campaign"})]}):(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Button,{size:"lg",className:"h-16 w-16 rounded-full p-0 mb-3",onClick:()=>{i?s?n?d():c({title:"Setup Required",description:"Please define your ideal customer first (Box 3)",variant:"destructive"}):c({title:"Setup Required",description:"Please add your product information first (Box 2)",variant:"destructive"}):c({title:"Setup Required",description:"Please add your sender identity first (Box 1)",variant:"destructive"})},disabled:!s||!i||!n,title:s&&i&&n?"Start your campaign":"Complete all setup steps first",children:(0,t.jsx)(Y.Play,{className:"h-8 w-8 ml-1"})}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Start Campaign"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Launch daily outreach"})]})]})})}var K=e.i(9912),Z=e.i(3116);function _({onStartClick:e}){return(0,t.jsxs)("div",{className:"mb-8 bg-gradient-to-br from-emerald-500 via-teal-500 to-cyan-500 rounded-xl p-10 text-white shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-3xl"}),(0,t.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-white/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"relative z-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-300 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium uppercase tracking-wider opacity-90",children:"Ready to Launch"})]}),(0,t.jsx)("h2",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-white to-white/80 bg-clip-text",children:"Activate Your Daily Sales Companion ðŸš€"}),(0,t.jsx)("p",{className:"text-lg opacity-90 mb-4",children:"Get 5 personalized prospects delivered to your inbox every morning"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z.Clock,{className:"w-4 h-4 opacity-80"}),(0,t.jsx)("span",{className:"text-sm opacity-90",children:"2 minute setup"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.TrendingUp,{className:"w-4 h-4 opacity-80"}),(0,t.jsx)("span",{className:"text-sm opacity-90",children:"Build momentum"})]})]})]}),(0,t.jsx)("div",{children:(0,t.jsxs)(l.Button,{size:"lg",className:"min-w-[200px] bg-white text-emerald-600 hover:bg-white/90 font-semibold shadow-lg",onClick:e,children:[(0,t.jsx)(K.Rocket,{className:"h-5 w-5 mr-2"}),"Start Daily Outreach"]})})]})})]})}function Q({hasSenderProfile:e,hasProduct:a,hasCustomerProfile:s}){let i=[e,a,s].filter(Boolean).length;return(0,t.jsxs)("div",{className:"mb-8 bg-gradient-to-br from-amber-400 via-orange-400 to-yellow-400 rounded-xl p-10 text-white shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-3xl"}),(0,t.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-white/10 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-300 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium uppercase tracking-wider opacity-90",children:"Campaign Setup"})]}),(0,t.jsx)("h2",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-white to-white/80 bg-clip-text",children:"Build Your Outreach Campaign ðŸŽ¯"}),(0,t.jsx)("p",{className:"text-lg opacity-90 mb-4",children:"Configure the 3 components below to start generating daily leads"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(L.User,{className:"w-4 h-4 opacity-80"}),(0,t.jsx)("span",{className:"text-sm opacity-90",children:e?"âœ“ Profile Set":"Add Your Profile"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(U.Package,{className:"w-4 h-4 opacity-80"}),(0,t.jsx)("span",{className:"text-sm opacity-90",children:a?"âœ“ Product Added":"Define Product"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(M.Target,{className:"w-4 h-4 opacity-80"}),(0,t.jsx)("span",{className:"text-sm opacity-90",children:s?"âœ“ Customer Defined":"Set Target"})]})]})]}),(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg rounded-xl p-6 min-w-[140px] border border-white/20",children:[(0,t.jsx)("p",{className:"text-sm opacity-90 mb-1",children:"Setup Progress"}),(0,t.jsxs)("p",{className:"text-4xl font-bold",children:[i,"/3"]}),(0,t.jsxs)("p",{className:"text-xs opacity-70 mt-1",children:[0===i&&"Let's start",1===i&&"Good progress",2===i&&"Almost ready",3===i&&"Ready to launch"]})]})})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-white h-full rounded-full transition-all duration-500",style:{width:`${i/3*100}%`}})}),(0,t.jsxs)("p",{className:"text-xs opacity-70 mt-2",children:["Setup Progress: ",Math.round(i/3*100),"% Complete"]})]})]})]})}var p=p;function V({stats:e}){let a=Math.min(e?.currentStreak||0,14),s=Math.max(14-a,0),i=Math.min(a/14*100,100);return(0,t.jsxs)("div",{className:"mb-8 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-xl p-10 text-white shadow-2xl relative overflow-hidden",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-white/5 backdrop-blur-3xl"}),(0,t.jsx)("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute -bottom-10 -left-10 w-60 h-60 bg-white/10 rounded-full blur-3xl"}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-sm font-medium uppercase tracking-wider opacity-90",children:"Campaign Active"})]}),(0,t.jsx)("h2",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-white to-white/80 bg-clip-text",children:"Your Campaign is Live! ðŸŽ¯"}),(0,t.jsx)("p",{className:"text-lg opacity-90 mb-4",children:"Targeting ideal customers with personalized outreach"}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(p.default,{className:"w-4 h-4 opacity-80"}),(0,t.jsxs)("span",{className:"text-sm opacity-90",children:["Day ",a," of 14"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(Z.Clock,{className:"w-4 h-4 opacity-80"}),(0,t.jsxs)("span",{className:"text-sm opacity-90",children:[s," days remaining"]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg rounded-xl p-6 min-w-[140px] border border-white/20",children:[(0,t.jsx)("p",{className:"text-sm opacity-90 mb-1",children:"Emails Sent"}),(0,t.jsx)("p",{className:"text-4xl font-bold",children:e?.emailsSentThisMonth||0}),(0,t.jsxs)("p",{className:"text-xs opacity-70 mt-1",children:["+",e?.emailsSentToday||0," today"]})]}),(0,t.jsxs)("div",{className:"bg-white/15 backdrop-blur-lg rounded-xl p-6 min-w-[140px] border border-white/20",children:[(0,t.jsx)("p",{className:"text-sm opacity-90 mb-1",children:"Companies Reached"}),(0,t.jsx)("p",{className:"text-4xl font-bold",children:e?.companiesContactedThisMonth||0}),(0,t.jsx)("p",{className:"text-xs opacity-70 mt-1",children:"This month"})]})]})]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-white h-full rounded-full transition-all duration-500",style:{width:`${i}%`}})}),(0,t.jsxs)("p",{className:"text-xs opacity-70 mt-2",children:["Campaign Progress: ",Math.round(i),"% Complete"]})]})]})]})}function G({isActivated:e,stats:a,hasSenderProfile:s,hasProduct:i,hasCustomerProfile:r,onStartClick:l}){let n=!s&&!i&&!r,d=s&&i&&r;return n?(0,t.jsx)(_,{onStartClick:l||(()=>{})}):e&&d?(0,t.jsx)(V,{stats:a||{}}):(0,t.jsx)(Q,{hasSenderProfile:s,hasProduct:i,hasCustomerProfile:r})}var J=e.i(19273),X=e.i(70273),ee=e.i(9826),et=e.i(56909),ea=e.i(73375),es=e.i(63059),ei=e.i(48256),er=e.i(52571),el=e.i(80390),en=e.i(39189),ed=e.i(96226),eo=e.i(76151),ec=e.i(9071);e.i(35858);let em={year:0,month:1,day:2,hour:3,minute:4,second:5},eu={},ex=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),eh="06/25/2014, 00:00:00"===ex||"â€Ž06â€Ž/â€Ž25â€Ž/â€Ž2014â€Ž â€Ž00â€Ž:â€Ž00â€Ž:â€Ž00"===ex;function ep(e,t,a,s,i,r,l){let n=new Date(0);return n.setUTCFullYear(e,t,a),n.setUTCHours(s,i,r,l),n}let eg=/^(Z)$/,ef=/^([+-]\d{2})$/,ev=/^([+-])(\d{2}):?(\d{2})$/;function ej(e,t,a){let s,i;if(!e)return 0;let r=eg.exec(e);if(r)return 0;if(r=ef.exec(e))return eb(s=parseInt(r[1],10))?-(36e5*s):NaN;if(r=ev.exec(e)){s=parseInt(r[2],10);let e=parseInt(r[3],10);return eb(s,e)?(i=36e5*Math.abs(s)+6e4*e,"+"===r[1]?-i:i):NaN}if(function(e){if(eN[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),eN[e]=!0,!0}catch(e){return!1}}(e)){var l;t=new Date(t||Date.now());let s=ey(a?t:ep((l=t).getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()),e);return-(a?s:function(e,t,a){let s=e.getTime()-t,i=ey(new Date(s),a);if(t===i)return t;let r=ey(new Date(s-=i-t),a);return i===r?i:Math.max(i,r)}(t,s,e))}return NaN}function ey(e,t){var a,s,i;let r,l,n,d=(eu[a=t]||(eu[a]=eh?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:a,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),"formatToParts"in(n=eu[a])?function(e,t){try{let a=e.formatToParts(t),s=[];for(let e=0;e<a.length;e++){let t=em[a[e].type];void 0!==t&&(s[t]=parseInt(a[e].value,10))}return s}catch(e){if(e instanceof RangeError)return[NaN];throw e}}(n,e):(s=n,i=e,r=s.format(i),[parseInt((l=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r))[3],10),parseInt(l[1],10),parseInt(l[2],10),parseInt(l[4],10),parseInt(l[5],10),parseInt(l[6],10)])),o=ep(d[0],d[1]-1,d[2],d[3]%24,d[4],d[5],0).getTime(),c=e.getTime(),m=c%1e3;return o-(c-=m>=0?m:1e3+m)}function eb(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}let eN={};function ew(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e-t}let eC=/^([0-9W+-]+)(T| )(.*)/,eT=/^([0-9W+-]+)(.*)/,eS=/^(\d{2})$/,ek=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],eD=/^(\d{4})/,eP=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],eA=/^-(\d{2})$/,eM=/^-?(\d{3})$/,eE=/^-?(\d{2})-?(\d{2})$/,eI=/^-?W(\d{2})$/,eB=/^-?W(\d{2})-?(\d{1})$/,eF=/^(\d{2}([.,]\d*)?)$/,eL=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,ez=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,e$=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;function eR(e,t,a){t=t||0,a=a||0;let s=new Date(0);s.setUTCFullYear(e,0,4);let i=7*t+a+1-(s.getUTCDay()||7);return s.setUTCDate(s.getUTCDate()+i),s}let eU=[31,28,31,30,31,30,31,31,30,31,30,31],eO=[31,29,31,30,31,30,31,31,30,31,30,31];function eq(e){return e%400==0||e%4==0&&e%100!=0}function eW(e,t,a){if(t<0||t>11)return!1;if(null!=a){if(a<1)return!1;let s=eq(e);if(s&&a>eO[t]||!s&&a>eU[t])return!1}return!0}function eY(e,t){return!(e<0)&&!(e>52)&&(null==t||!(t<0)&&!(t>6))}function eH(e,t,a){return!(e<0)&&!(e>=25)&&(null==t||!(t<0)&&!(t>=60))&&(null==a||!(a<0)&&!(a>=60))}var eK=e.i(24487),eZ=e.i(91593),e_=e.i(67244);let eQ=["06:00","07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00"],eV=[{value:"America/New_York",label:"EST/EDT - Eastern Time"},{value:"America/Chicago",label:"CST/CDT - Central Time"},{value:"America/Denver",label:"MST/MDT - Mountain Time"},{value:"America/Los_Angeles",label:"PST/PDT - Pacific Time"},{value:"America/Phoenix",label:"MST - Arizona Time"},{value:"America/Anchorage",label:"AKST/AKDT - Alaska Time"},{value:"Pacific/Honolulu",label:"HST - Hawaii Time"},{value:"America/Toronto",label:"EST/EDT - Toronto"},{value:"America/Vancouver",label:"PST/PDT - Vancouver"},{value:"America/Mexico_City",label:"CST/CDT - Mexico City"},{value:"America/Sao_Paulo",label:"BRT/BRST - SÃ£o Paulo"},{value:"America/Buenos_Aires",label:"ART - Buenos Aires"},{value:"America/Santiago",label:"CLT/CLST - Santiago"},{value:"America/Lima",label:"PET - Lima"},{value:"America/Bogota",label:"COT - BogotÃ¡"},{value:"Europe/London",label:"GMT/BST - London"},{value:"Europe/Paris",label:"CET/CEST - Paris"},{value:"Europe/Berlin",label:"CET/CEST - Berlin"},{value:"Europe/Rome",label:"CET/CEST - Rome"},{value:"Europe/Madrid",label:"CET/CEST - Madrid"},{value:"Europe/Amsterdam",label:"CET/CEST - Amsterdam"},{value:"Europe/Athens",label:"EET/EEST - Athens"},{value:"Europe/Moscow",label:"MSK - Moscow"},{value:"Europe/Stockholm",label:"CET/CEST - Stockholm"},{value:"Europe/Helsinki",label:"EET/EEST - Helsinki"},{value:"Asia/Tokyo",label:"JST - Tokyo"},{value:"Asia/Shanghai",label:"CST - China/Shanghai"},{value:"Asia/Hong_Kong",label:"HKT - Hong Kong"},{value:"Asia/Singapore",label:"SGT - Singapore"},{value:"Asia/Seoul",label:"KST - Seoul"},{value:"Asia/Taipei",label:"CST - Taipei"},{value:"Asia/Bangkok",label:"ICT - Bangkok"},{value:"Asia/Jakarta",label:"WIB - Jakarta"},{value:"Asia/Manila",label:"PHT - Manila"},{value:"Asia/Kolkata",label:"IST - India"},{value:"Asia/Dubai",label:"GST - Dubai"},{value:"Asia/Tel_Aviv",label:"IST/IDT - Tel Aviv"},{value:"Asia/Karachi",label:"PKT - Karachi"},{value:"Australia/Sydney",label:"AEST/AEDT - Sydney"},{value:"Australia/Melbourne",label:"AEST/AEDT - Melbourne"},{value:"Australia/Brisbane",label:"AEST - Brisbane"},{value:"Australia/Perth",label:"AWST - Perth"},{value:"Pacific/Auckland",label:"NZST/NZDT - Auckland"},{value:"Pacific/Fiji",label:"FJT/FJST - Fiji"},{value:"Africa/Cairo",label:"EET - Cairo"},{value:"Africa/Lagos",label:"WAT - Lagos"},{value:"Africa/Johannesburg",label:"SAST - Johannesburg"},{value:"Africa/Nairobi",label:"EAT - Nairobi"},{value:"Africa/Casablanca",label:"WET/WEST - Casablanca"}];function eG(){let{toast:e}=(0,u.useToast)(),[r,o]=(0,a.useState)(!1),[c,h]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)("09:00"),[j,y]=(0,a.useState)("America/New_York"),[b,C]=(0,a.useState)(0),[T,S]=(0,a.useState)(!1),k=(0,a.useRef)(null),{data:D,isLoading:P}=(0,s.useQuery)({queryKey:[`/api/daily-outreach/weekly-activity?weekOffset=${b}`],refetchInterval:!r&&0===b&&6e4,placeholderData:J.keepPreviousData,staleTime:3e4}),{data:A}=(0,s.useQuery)({queryKey:["/api/daily-outreach/preferences"],enabled:r,staleTime:6e4});(0,a.useEffect)(()=>{if(0!==b)return k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{E(0)},1e4),()=>{k.current&&clearTimeout(k.current)};k.current&&(clearTimeout(k.current),k.current=null)},[b]);let M=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/preferences",{...e,minContactsRequired:5})).json(),onSuccess:()=>{e({title:"Schedule updated",description:"Your active days have been saved"}),o(!1),m.queryClient.invalidateQueries({queryKey:[`/api/daily-outreach/weekly-activity?weekOffset=${b}`]}),m.queryClient.invalidateQueries({queryKey:["/api/daily-outreach/preferences"]})},onError:()=>{e({title:"Failed to update schedule",description:"Please try again",variant:"destructive"})}});(0,a.useEffect)(()=>{A&&r&&(g(A.enabled),v(A.scheduleTime),y(A.timezone),h(A.scheduleDays.map(e=>e.toLowerCase())))},[A,r]);let E=e=>{T||r||(S(!0),setTimeout(()=>{C(e),S(!1)},150))},I=e=>{let t=e.toLowerCase();h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])};if(P||!D)return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"h-8 w-8"}),(0,t.jsx)("div",{className:"flex gap-1.5 flex-1",children:[0,1,2,3,4,5,6].map(e=>(0,t.jsx)("div",{className:"flex-1 h-8 bg-muted animate-pulse rounded"},e))}),(0,t.jsx)("div",{className:"h-8 w-8"})]});let{dayActivity:B,targetDailyThreshold:F}=D,L=B.filter(e=>e.isScheduledDay).every(e=>e.emailsSent>=F);return(0,t.jsx)(eK.TooltipProvider,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[r&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground px-1",children:"Configure your daily outreach schedule."}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&(0,t.jsxs)(eK.Tooltip,{children:[(0,t.jsx)(eK.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"icon",variant:"ghost",className:(0,w.cn)("h-8 w-8 transition-all",-1===b&&"opacity-50 cursor-not-allowed",T&&"opacity-30"),onClick:()=>0===b?E(-1):E(0),disabled:T||-1===b,"data-testid":"week-nav-left",children:0===b?(0,t.jsx)(ea.ChevronLeft,{className:"h-4 w-4"}):(0,t.jsx)(es.ChevronRight,{className:"h-4 w-4"})})}),(0,t.jsx)(eK.TooltipContent,{children:(0,t.jsx)("p",{children:0===b?"View last week":"Back to current week"})})]}),(0,t.jsxs)("div",{className:(0,w.cn)("relative flex gap-1.5 flex-1 transition-all duration-300",L&&!r?"bg-green-50 dark:bg-green-950/20 rounded-lg p-1":"",0!==b&&!r&&"ring-1 ring-amber-400/30 bg-amber-50/10 dark:bg-amber-950/10 rounded-lg",T&&"opacity-0 transform translate-x-4",!T&&"opacity-100 transform translate-x-0"),"data-testid":"weekly-streak-row",children:[0!==b&&!r&&(0,t.jsx)("div",{className:"absolute -top-4 -left-8 z-10 pointer-events-none animate-in fade-in duration-300","data-testid":"badge-week-label",children:(0,t.jsx)("span",{className:"inline-block rounded-full bg-amber-500/60 dark:bg-amber-600/60 backdrop-blur-sm text-white text-[10px] sm:text-xs px-2 py-0.5 shadow-sm font-medium",children:(()=>{if(0===b)return"";if(-1===b)return"Last week";let e=(0,el.startOfWeek)((0,ec.addWeeks)(new Date,b)),t=(0,en.addDays)(e,6);return`${(0,x.format)(e,"MMM d")} - ${(0,x.format)(t,"MMM d")}`})()})}),B.map(a=>{var s;let i,l,n,d=new Date(a.date),o=D.timezone||"America/New_York",m=(s=function(e,t={}){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);let a=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==a&&1!==a&&0!==a)throw RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);let s=function(e){let t,a={},s=eC.exec(e);if(s?(a.date=s[1],t=s[3]):(s=eT.exec(e))?(a.date=s[1],t=s[2]):(a.date=null,t=e),t){let e=e$.exec(t);e?(a.time=t.replace(e[1],""),a.timeZone=e[1].trim()):a.time=t}return a}(e),{year:i,restDateString:r}=function(e,t){if(e){let a=ek[t],s=eP[t],i=eD.exec(e)||s.exec(e);if(i){let t=i[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(i=eS.exec(e)||a.exec(e)){let t=i[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(s.date,a),l=function(e,t){let a,s,i;if(null===t)return null;if(!e||!e.length)return(a=new Date(0)).setUTCFullYear(t),a;let r=eA.exec(e);if(r)return(a=new Date(0),eW(t,s=parseInt(r[1],10)-1))?(a.setUTCFullYear(t,s),a):new Date(NaN);if(r=eM.exec(e)){a=new Date(0);let e=parseInt(r[1],10);return!function(e,t){if(t<1)return!1;let a=eq(e);return(!a||!(t>366))&&(!!a||!(t>365))}(t,e)?new Date(NaN):(a.setUTCFullYear(t,0,e),a)}if(r=eE.exec(e)){a=new Date(0),s=parseInt(r[1],10)-1;let e=parseInt(r[2],10);return eW(t,s,e)?(a.setUTCFullYear(t,s,e),a):new Date(NaN)}if(r=eI.exec(e))return eY(i=parseInt(r[1],10)-1)?eR(t,i):new Date(NaN);if(r=eB.exec(e)){i=parseInt(r[1],10)-1;let e=parseInt(r[2],10)-1;return eY(i,e)?eR(t,i,e):new Date(NaN)}return null}(r,i);if(null===l||isNaN(l.getTime())||!l)return new Date(NaN);{let e,a=l.getTime(),i=0;if(s.time&&(null===(i=function(e){let t,a,s=eF.exec(e);if(s)return eH(t=parseFloat(s[1].replace(",",".")))?t%24*36e5:NaN;if(s=eL.exec(e))return eH(t=parseInt(s[1],10),a=parseFloat(s[2].replace(",",".")))?t%24*36e5+6e4*a:NaN;if(s=ez.exec(e)){t=parseInt(s[1],10),a=parseInt(s[2],10);let e=parseFloat(s[3].replace(",","."));return eH(t,a,e)?t%24*36e5+6e4*a+1e3*e:NaN}return null}(s.time))||isNaN(i)))return new Date(NaN);if(s.timeZone||t.timeZone){if(isNaN(e=ej(s.timeZone||t.timeZone,new Date(a+i))))return new Date(NaN)}else e=ew(new Date(a+i)),e=ew(new Date(a+i+e));return new Date(a+i+e)}}(s=d,void 0),i=ej(o,s,!0),l=new Date(s.getTime()-i),(n=new Date(0)).setFullYear(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()),n.setHours(l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds()),n),u=0===b&&(0,eo.isSameDay)(m,(0,ed.constructFrom)(m,Date.now())),x=a.emailsSent>=F,h=a.emailsSent>0&&a.emailsSent<F,p=a.isScheduledDay&&!x,g=a.dayOfWeek.toLowerCase(),f=c.includes(g),v="";return v=r?f?"Click to mark as inactive":"Click to mark as active":a.emailsSent>0?`View ${a.emailsSent} email${a.emailsSent>1?"s":""} sent`:a.batchToken?"View generated batch":u&&a.isScheduledDay?"Today is Active":a.isScheduledDay?"Marked as Active":"Marked as Inactive",(0,t.jsxs)(eK.Tooltip,{children:[(0,t.jsx)(eK.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,w.cn)("flex-1 flex items-center px-3 py-1.5 rounded-md border-2 transition-all duration-300 relative",r&&"cursor-pointer hover:bg-accent-hover",r&&f&&"bg-primary/10 border-primary",r&&!f&&"border-border opacity-60",!r&&!a.isScheduledDay&&!u&&"border-border opacity-50",!r&&a.isScheduledDay&&!u&&"border-primary/50",!r&&u&&"bg-gradient-to-br from-yellow-400/10 to-pink-500/10 border-transparent",!r&&x&&!u&&"bg-green-50 dark:bg-green-950/30 border-green-500",!r&&x&&u&&"bg-green-50 dark:bg-green-950/30 border-transparent",!r&&"hover:scale-105",!r&&(a.emailsSent>0||a.batchToken||0===b&&a.isScheduledDay)&&"cursor-pointer hover:shadow-lg transition-all"),style:{...!r&&u&&{background:x?"linear-gradient(135deg, rgba(34, 197, 94, 0.1) 0%, rgba(34, 197, 94, 0.05) 100%)":a.isScheduledDay?"linear-gradient(135deg, rgba(251, 191, 36, 0.05) 0%, rgba(236, 72, 153, 0.05) 100%)":void 0,boxShadow:x?"inset 0 0 0 3px rgb(34 197 94)":"inset 0 0 0 3px transparent, 0 0 0 3px transparent, inset 0 0 0 3px transparent",backgroundImage:x?void 0:"linear-gradient(white, white), linear-gradient(135deg, #fbbf24 0%, #ec4899 100%)",backgroundOrigin:x?void 0:"border-box",backgroundClip:x?void 0:"padding-box, border-box",border:u&&!x?"3px solid transparent":void 0}},onClick:async()=>{if(r)I(a.dayOfWeek);else if(a.emailsSent>0||a.batchToken||0===b&&a.isScheduledDay)if(a.batchToken)window.open(`/outreach/daily/${a.batchToken}`,"_blank");else try{let t=a.dateKey||new Date(a.date).toISOString().split("T")[0],s=await fetch(`/api/daily-outreach/token-by-date?date=${t}`);if(!s.ok){if(404===s.status)e({title:"No outreach data",description:"No batch found for this date",variant:"default"});else throw Error("Failed to fetch batch token");return}let{token:i}=await s.json();window.open(`/outreach/daily/${i}`,"_blank")}catch(t){console.error("Error navigating to daily outreach:",t),e({title:"Error",description:"Failed to load outreach data",variant:"destructive"})}},"data-testid":`day-cell-${a.dayOfWeek.toLowerCase()}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsxs)("div",{className:"text-[11px] font-medium text-muted-foreground",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:a.dayOfWeek.slice(0,3).toUpperCase()}),(0,t.jsx)("span",{className:"sm:hidden",children:a.dayOfWeek[0].toUpperCase()})]}),r?(0,t.jsx)(eZ.Checkbox,{checked:f,onCheckedChange:()=>I(a.dayOfWeek),onClick:e=>e.stopPropagation(),className:"h-4 w-4 sm:h-5 sm:w-5","data-testid":`checkbox-${a.dayOfWeek.toLowerCase()}`}):(0,t.jsx)(t.Fragment,{children:x?(0,t.jsx)(N,{className:"h-4 w-4 text-orange-500 animate-pulse","data-testid":`icon-fire-${a.dayOfWeek.toLowerCase()}`}):h?(0,t.jsx)(X.Star,{className:"h-3.5 w-3.5 text-yellow-500","data-testid":`icon-star-${a.dayOfWeek.toLowerCase()}`}):p?(0,t.jsx)("span",{className:"text-sm","data-testid":`icon-egg-${a.dayOfWeek.toLowerCase()}`,children:"ðŸ¥š"}):(0,t.jsx)("div",{className:(0,w.cn)("h-1.5 w-1.5 rounded-full",a.isScheduledDay?"bg-primary/30":"bg-muted"),"data-testid":`icon-empty-${a.dayOfWeek.toLowerCase()}`})})]}),!r&&a.emailsSent>0&&(0,t.jsx)("div",{className:"text-[10px] text-muted-foreground ml-auto",children:a.emailsSent})]})}),(0,t.jsx)(eK.TooltipContent,{children:(0,t.jsx)("p",{children:v})})]},a.dayOfWeek)}),!r&&L&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white text-[10px] px-1.5 py-0.5 rounded-full animate-bounce",children:"ðŸŽ‰ Complete!"})]}),0===b?(0,t.jsxs)(eK.Tooltip,{children:[(0,t.jsx)(eK.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"icon",variant:r?"default":"ghost",className:"h-8 w-8 transition-all",onClick:()=>{r?M.mutate({enabled:p,scheduleDays:c,scheduleTime:f,timezone:j}):(0!==b&&C(0),o(!0),D&&h(D.scheduleDays.map(e=>e.toLowerCase())))},disabled:M.isPending,"data-testid":"edit-save-button",children:r?(0,t.jsx)(et.Save,{className:"h-4 w-4"}):(0,t.jsx)(ee.Pencil,{className:"h-4 w-4"})})}),(0,t.jsx)(eK.TooltipContent,{children:(0,t.jsx)("p",{children:r?"Save changes":"Edit schedule"})})]}):(0,t.jsxs)(eK.Tooltip,{children:[(0,t.jsx)(eK.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"icon",variant:"ghost",className:(0,w.cn)("h-8 w-8 transition-all",T&&"opacity-30"),onClick:()=>E(0),disabled:T,"data-testid":"week-nav-right",children:(0,t.jsx)(es.ChevronRight,{className:"h-4 w-4"})})}),(0,t.jsx)(eK.TooltipContent,{children:(0,t.jsx)("p",{children:"Back to current week"})})]})]}),r&&(0,t.jsxs)("div",{className:"flex items-center gap-3 px-1 py-1.5 bg-muted/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(n.Label,{htmlFor:"enable-daily",className:"text-xs font-medium cursor-pointer",children:"Enable"}),(0,t.jsxs)(eK.Tooltip,{delayDuration:0,children:[(0,t.jsx)(eK.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("button",{type:"button",className:"inline-flex items-center justify-center",onClick:e=>e.preventDefault(),children:(0,t.jsx)(er.Info,{className:"h-3.5 w-3.5 text-muted-foreground cursor-help hover:text-foreground transition-colors"})})}),(0,t.jsx)(eK.TooltipContent,{className:"max-w-[250px]",children:(0,t.jsx)("p",{className:"text-xs",children:"Enable the daily email content generation and notifications (on active days.)"})})]}),(0,t.jsx)(d.Switch,{id:"enable-daily",checked:p,onCheckedChange:g,className:"h-4 scale-90","data-testid":"switch-enable-daily"})]}),(0,t.jsx)("div",{className:"h-4 w-px bg-border"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(Z.Clock,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Send Time"}),(0,t.jsxs)(e_.Select,{value:f,onValueChange:v,disabled:!p,children:[(0,t.jsx)(e_.SelectTrigger,{className:"h-7 w-[80px] text-xs","data-testid":"select-send-time",children:(0,t.jsx)(e_.SelectValue,{})}),(0,t.jsx)(e_.SelectContent,{children:eQ.map(e=>(0,t.jsx)(e_.SelectItem,{value:e,className:"text-xs",children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(ei.Globe,{className:"h-3.5 w-3.5 text-muted-foreground"}),(0,t.jsxs)(e_.Select,{value:j,onValueChange:y,disabled:!p,children:[(0,t.jsx)(e_.SelectTrigger,{className:"h-7 w-[160px] text-xs","data-testid":"select-timezone",children:(0,t.jsx)(e_.SelectValue,{})}),(0,t.jsx)(e_.SelectContent,{children:eV.map(e=>(0,t.jsx)(e_.SelectItem,{value:e.value,className:"text-xs",children:e.label},e.value))})]})]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",onClick:()=>{o(!1),D&&h(D.scheduleDays.map(e=>e.toLowerCase()))},"data-testid":"button-cancel",children:"Cancel"})]})]})})}function eJ(){let e,{user:S}=(0,C.useAuth)(),{toast:k}=(0,u.useToast)();(0,F.useRouter)();let[D,P]=(0,a.useState)(!1),[A,M]=(0,a.useState)({from:void 0,to:void 0}),[E,L]=(0,a.useState)(!1),[z,$]=(0,a.useState)(!1),[U,q]=(0,a.useState)(!1),[Y,K]=(0,a.useState)(null),[Z,_]=(0,a.useState)(null),[Q,V]=(0,a.useState)(null),[J,X]=(0,a.useState)(!1),{data:ee,isLoading:et,refetch:ea}=(0,s.useQuery)({queryKey:["/api/daily-outreach/streak-stats"],enabled:!!S,refetchInterval:3e4}),{data:es,isLoading:ei}=(0,s.useQuery)({queryKey:["/api/products"],enabled:!!S}),{data:er,isLoading:el}=(0,s.useQuery)({queryKey:["/api/sender-profiles"],enabled:!!S}),{data:en,isLoading:ed}=(0,s.useQuery)({queryKey:["/api/customer-profiles"],enabled:!!S}),{data:eo,refetch:ec}=(0,s.useQuery)({queryKey:["/api/daily-outreach/preferences"],enabled:!!S});(0,a.useEffect)(()=>{if(eo&&(P(eo.vacationMode||!1),eo.vacationStartDate&&eo.vacationEndDate)){let e=eo.vacationStartDate.split("T")[0],t=eo.vacationEndDate.split("T")[0];M({from:(0,h.parse)(e,"yyyy-MM-dd",new Date),to:(0,h.parse)(t,"yyyy-MM-dd",new Date)})}},[eo]);let em=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/preferences",e)).json(),onMutate:async e=>{await m.queryClient.cancelQueries({queryKey:["/api/daily-outreach/preferences"]});let t=m.queryClient.getQueryData(["/api/daily-outreach/preferences"]),a=t||{enabled:!1,scheduleDays:["monday","tuesday","wednesday"],scheduleTime:"09:00",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,minContactsRequired:5,vacationMode:!1,vacationStartDate:null,vacationEndDate:null,activeProductId:void 0,activeSenderProfileId:void 0,activeCustomerProfileId:void 0};return m.queryClient.setQueryData(["/api/daily-outreach/preferences"],{...a,...e}),{previousPreferences:t}},onError:(e,t,a)=>{a?.previousPreferences&&m.queryClient.setQueryData(["/api/daily-outreach/preferences"],a.previousPreferences),k({title:"Error updating settings",description:"Please try again",variant:"destructive"})},onSuccess:()=>{k({title:"Settings updated",description:"Your outreach preferences have been saved"})},onSettled:()=>{ec(),ea()}}),eu=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/vacation",e)).json(),onSuccess:()=>{k({title:D?"Vacation mode activated":"Back from vacation",description:D?"Daily emails paused":"Daily emails resumed"}),ec()}}),ex=(0,i.useMutation)({mutationFn:async()=>(await (0,m.apiRequest)("POST","/api/daily-outreach/trigger")).json(),onSuccess:e=>{e.success?(k({title:"Email sent!",description:"Check your inbox for today's prospects"}),ea()):k({title:"No contacts available",description:e.message||"Add more contacts first",variant:"destructive"})}}),eh=(0,i.useMutation)({mutationFn:async()=>(await (0,m.apiRequest)("POST","/api/daily-outreach/send-test-email")).json(),onSuccess:e=>{e.success?k({title:"Test email sent!",description:"Check your inbox for the test notification email"}):k({title:"Failed to send test email",description:e.message||"Please check your SendGrid configuration",variant:"destructive"})},onError:()=>{k({title:"Error sending test email",description:"Please verify your SendGrid settings are configured correctly",variant:"destructive"})}}),ep=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/preferences",{activeProductId:e})).json(),onSuccess:()=>{k({title:"Product selected",description:"Your active product has been updated"})}}),eg=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/preferences",{activeSenderProfileId:e})).json(),onSuccess:()=>{k({title:"Sender profile selected",description:"Your active sender profile has been updated"})}}),ef=(0,i.useMutation)({mutationFn:async e=>(await (0,m.apiRequest)("PUT","/api/daily-outreach/preferences",{activeCustomerProfileId:e})).json(),onSuccess:()=>{k({title:"Customer profile selected",description:"Your active customer profile has been updated"})}});(0,a.useEffect)(()=>{!J&&eo&&es&&er&&en&&(eo.vacationMode?(P(!0),eo.vacationStartDate&&eo.vacationEndDate&&M({from:(0,h.parse)(eo.vacationStartDate,"yyyy-MM-dd",new Date),to:(0,h.parse)(eo.vacationEndDate,"yyyy-MM-dd",new Date)})):(P(!1),M({from:void 0,to:void 0})),eo.activeProductId&&K(eo.activeProductId),eo.activeSenderProfileId&&_(eo.activeSenderProfileId),eo.activeCustomerProfileId&&V(eo.activeCustomerProfileId),X(!0))},[J,eo,es,er,en]);let ev=!!eo?.enabled&&!!Y&&!!Z&&!!Q;return S?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 max-w-6xl",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,t.jsx)(N,{className:"h-8 w-8 text-orange-500"}),"Your Sales Streak ",(e=ee?.currentStreak||0)>=30?"ðŸ”¥ðŸ”¥ðŸ”¥":e>=14?"ðŸ”¥ðŸ”¥":e>=7?"ðŸ”¥":e>=3?"âœ¨":""]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Weekly Goal Progress:"}),(0,t.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:[ee?.weeklyProgress||0," of ",ee?.weeklyGoal||eo?.scheduleDays?.length||3," Days"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-4xl font-bold",children:ee?.currentStreak||0}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Days"})]})]})}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)(eG,{})}),(0,t.jsx)(G,{isActivated:ev,stats:ee,hasSenderProfile:!!Z,hasProduct:!!Y,hasCustomerProfile:!!Q,onStartClick:()=>L(!0)}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,t.jsx)(R,{senderProfiles:er,selectedSenderProfileId:Z,isLoading:el,onProfileChange:e=>{ev?k({description:"Pause campaign to change settings",variant:"destructive"}):Z===e?_(null):_(e)},onAddProfile:()=>q(!0),user:S}),(0,t.jsx)(O,{products:es,selectedProductId:Y,isLoading:ei,onProductChange:e=>{ev?k({description:"Pause campaign to change settings",variant:"destructive"}):Y===e?K(null):K(e)},onAddProduct:()=>L(!0)}),(0,t.jsx)(W,{customerProfiles:en,selectedCustomerProfileId:Q,isLoading:ed,onProfileChange:e=>{ev?k({description:"Pause campaign to change settings",variant:"destructive"}):Q===e?V(null):V(e)},onAddProfile:()=>$(!0)}),(0,t.jsx)(H,{isEnabled:ev,daysPerWeek:eo?.scheduleDays?.length||3,hasProduct:!!Y,hasSenderProfile:!!Z,hasCustomerProfile:!!Q,onActivate:()=>{Y&&Z&&Q?em.mutate({enabled:!0,scheduleDays:eo?.scheduleDays||["monday","tuesday","wednesday"],activeProductId:Y,activeSenderProfileId:Z,activeCustomerProfileId:Q}):k({title:"Setup Incomplete",description:"Please configure all campaign components before activating",variant:"destructive"})},onDeactivate:()=>{em.mutate({enabled:!1})}})]}),Y&&(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 mb-8",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)(r.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(g.Mail,{className:"h-4 w-4"}),"Today's Prospects"]})}),(0,t.jsx)(r.CardContent,{children:ee?.todaysBatch?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[ee.todaysBatch.itemCount," Emails Ready"]}),ee.todaysBatch.prospects&&ee.todaysBatch.prospects.length>0&&(0,t.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ee.todaysBatch.prospects.map((e,a)=>(0,t.jsxs)("div",{className:"py-2 cursor-pointer hover:bg-muted/50 transition-colors rounded px-2 -mx-2",onClick:()=>window.open(`/outreach/daily/${ee.todaysBatch?.token}`,"_blank"),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&window.open(`/outreach/daily/${ee.todaysBatch?.token}`,"_blank")},role:"button",tabIndex:0,"aria-label":`View outreach email for ${e.contact.name}`,children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"font-medium",children:e.contact.name}),(0,t.jsxs)("span",{className:"text-muted-foreground",children:[" @ ",e.company.name]})]}),e.contact.role&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:e.contact.role})]},a))}),(0,t.jsxs)(l.Button,{onClick:()=>{ee?.todaysBatch?.token&&window.open(`/outreach/daily/${ee.todaysBatch.token}`,"_blank")},size:"sm",className:"w-full",variant:"outline",children:[(0,t.jsx)(y.ExternalLink,{className:"h-4 w-4 mr-2"}),"Review & Send"]}),(0,t.jsxs)(l.Button,{onClick:()=>ex.mutate(),size:"sm",className:"w-full",variant:"outline",disabled:ex.isPending,children:[(0,t.jsx)(b.RefreshCw,{className:(0,w.cn)("h-4 w-4 mr-2",ex.isPending&&"animate-spin")}),"Re-generate"]}),(0,t.jsx)("button",{onClick:()=>eh.mutate(),className:"w-full text-[10px] h-5 mt-1 text-muted-foreground/50 hover:text-muted-foreground transition-colors",disabled:eh.isPending,children:"Send Test Email"})]}):(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No batch today"}),(0,t.jsxs)(l.Button,{onClick:()=>ex.mutate(),size:"sm",className:"w-full",variant:"outline",disabled:ex.isPending,children:[(0,t.jsx)(b.RefreshCw,{className:(0,w.cn)("h-4 w-4 mr-2",ex.isPending&&"animate-spin")}),"Generate Now"]}),(0,t.jsx)("button",{onClick:()=>eh.mutate(),className:"w-full text-[10px] h-5 mt-1 text-muted-foreground/50 hover:text-muted-foreground transition-colors",disabled:eh.isPending,children:"Send Test Email"})]})})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsx)(r.CardHeader,{className:"pb-3",children:(0,t.jsxs)(r.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,t.jsx)(v.Building2,{className:"h-4 w-4"}),"Available Pipeline"]})}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Companies"}),(0,t.jsx)("span",{className:"font-bold",children:ee?.availableCompanies||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Contacts"}),(0,t.jsx)("span",{className:"font-bold",children:ee?.availableContacts||0})]}),20>(ee?.availableContacts||0)&&(0,t.jsx)("p",{className:"text-xs text-yellow-600 mt-2",children:"Running low! Add more contacts"})]})})]})]}),(0,t.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Zap,{className:"h-5 w-5"}),"Outreach Settings"]}),(0,t.jsx)(r.CardDescription,{children:"Pause or preview daily prospects emails"})]}),(0,t.jsxs)(r.CardContent,{className:"space-y-6",children:[(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full",onClick:async()=>{try{let e=await fetch("/api/daily-outreach/preview",{headers:{Authorization:`Bearer ${localStorage.getItem("authToken")}`}});if(e.ok){let t=await e.text(),a=window.open("","_blank");a&&(a.document.write(t),a.document.close())}else k({title:"Error",description:"Failed to load email preview",variant:"destructive"})}catch(e){k({title:"Error",description:"Failed to open preview",variant:"destructive"})}},children:[(0,t.jsx)(g.Mail,{className:"h-4 w-4 mr-2"}),"Preview Email Template"]})}),(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)(n.Label,{htmlFor:"vacation-mode",children:"Vacation Mode"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Pause emails temporarily"})]}),(0,t.jsx)(d.Switch,{id:"vacation-mode",checked:D,onCheckedChange:()=>{let e=!D;P(e),eu.mutate({isOnVacation:e,vacationStartDate:A.from&&!isNaN(A.from.getTime())?(0,x.format)(A.from,"yyyy-MM-dd"):void 0,vacationEndDate:A.to&&!isNaN(A.to.getTime())?(0,x.format)(A.to,"yyyy-MM-dd"):void 0})}})]}),D&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.Popover,{children:[(0,t.jsx)(c.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"outline",className:"flex-1 justify-start",children:[(0,t.jsx)(p.default,{className:"mr-2 h-4 w-4"}),A.from&&A.to&&!isNaN(A.from.getTime())&&!isNaN(A.to.getTime())?(0,t.jsxs)(t.Fragment,{children:[(0,x.format)(A.from,"MMM d")," - ",(0,x.format)(A.to,"MMM d, yyyy")]}):"Select vacation dates"]})}),(0,t.jsx)(c.PopoverContent,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(o.Calendar,{mode:"range",selected:{from:A.from,to:A.to},onSelect:e=>{e?M({from:e.from||void 0,to:e.to||void 0}):M({from:void 0,to:void 0})},disabled:e=>{let t=new Date;return t.setHours(0,0,0,0),e<t},initialFocus:!0})})]}),(0,t.jsx)(l.Button,{onClick:()=>{A.from&&A.to&&!isNaN(A.from.getTime())&&!isNaN(A.to.getTime())&&eu.mutate({isOnVacation:D,vacationStartDate:(0,x.format)(A.from,"yyyy-MM-dd"),vacationEndDate:(0,x.format)(A.to,"yyyy-MM-dd")})},disabled:!A.from||!A.to,children:"Save"})]})})]})]})]}),(0,t.jsxs)(r.Card,{children:[(0,t.jsxs)(r.CardHeader,{children:[(0,t.jsxs)(r.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(j.TrendingUp,{className:"h-5 w-5"}),"Outreach Statistics"]}),(0,t.jsx)(r.CardDescription,{children:"Your sales activity over time"})]}),(0,t.jsx)(r.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm",children:"Today"}),(0,t.jsxs)("span",{className:"font-bold",children:[ee?.emailsSentToday||0," emails"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm",children:"This Week"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-bold",children:[ee?.emailsSentThisWeek||0," emails"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[ee?.companiesContactedThisWeek||0," companies"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-secondary rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm",children:"This Month"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-bold",children:[ee?.emailsSentThisMonth||0," emails"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[ee?.companiesContactedThisMonth||0," companies"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-primary/10 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"All Time"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"font-bold text-lg",children:[ee?.emailsSentAllTime||0," emails"]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:[ee?.companiesContactedAllTime||0," companies"]})]})]})]}),(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Longest Streak"}),(0,t.jsxs)("span",{className:"font-bold text-primary",children:[ee?.longestStreak||0," days ðŸ†"]})]})})]})})]})]}),(0,t.jsx)(T.ProductOnboardingForm,{open:E,onClose:()=>L(!1),onComplete:e=>{e&&(K(e),ep.mutate(e)),ec(),ea()}}),(0,t.jsx)(I,{open:z,onClose:()=>$(!1),onComplete:e=>{e&&(V(e),ef.mutate(e)),ec(),ea()}}),(0,t.jsx)(B.SenderProfileForm,{open:U,onClose:()=>q(!1),onComplete:e=>{e&&(_(e),eg.mutate(e)),ec(),ea()}})]}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"text-center text-muted-foreground",children:"Please log in to view your streak dashboard."})})}e.s(["default",()=>eJ],10790)},42426,e=>{e.n(e.i(10790))}]);