(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8589,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(52301);let n=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:n,className:(0,a.cn)("w-full caption-bottom text-sm",e),...s})}));n.displayName="Table";let o=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("thead",{ref:n,className:(0,a.cn)("[&_tr]:border-b",e),...s}));o.displayName="TableHeader";let i=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("tbody",{ref:n,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...s}));i.displayName="TableBody",s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("tfoot",{ref:n,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s})).displayName="TableFooter";let r=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("tr",{ref:n,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));r.displayName="TableRow";let l=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("th",{ref:n,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));l.displayName="TableHead";let d=s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("td",{ref:n,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));d.displayName="TableCell",s.forwardRef(({className:e,...s},n)=>(0,t.jsx)("caption",{ref:n,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...s})).displayName="TableCaption",e.s(["Table",()=>n,"TableBody",()=>i,"TableCell",()=>d,"TableHead",()=>l,"TableHeader",()=>o,"TableRow",()=>r])},86311,e=>{"use strict";let t=(0,e.i(75254).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],86311)},65582,e=>{"use strict";let t=(0,e.i(75254).default)("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);e.s(["ThumbsDown",()=>t],65582)},92161,e=>{"use strict";let t=(0,e.i(75254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["Menu",()=>t],92161)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},43432,e=>{"use strict";let t=(0,e.i(75254).default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);e.s(["Phone",()=>t],43432)},39401,e=>{"use strict";var t=e.i(43476),s=e.i(38785),a=e.i(6625),n=e.i(91593),o=e.i(90639),i=e.i(24487),r=e.i(71645);function l({text:e,className:s="",tooltipText:a="Click to copy",copiedText:n="Copied",copiedDuration:o=1500}){let[l,d]=(0,r.useState)(!1),c=(0,r.useCallback)(async t=>{t.stopPropagation();try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}d(!0),setTimeout(()=>d(!1),o)}catch(e){console.error("Failed to copy text:",e)}},[e,o]);return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(i.TooltipProvider,{delayDuration:300,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("button",{type:"button",onClick:c,className:`hover:underline cursor-pointer focus:outline-none ${s}`,children:e})}),!l&&(0,t.jsx)(i.TooltipContent,{side:"right",className:"text-[10px] px-1.5 py-0.5",children:(0,t.jsx)("p",{children:a})})]})}),l&&(0,t.jsx)("span",{className:"text-xs text-green-600 animate-in fade-in duration-150",children:n})]})}var d=e.i(86311),c=e.i(70273),h=e.i(65582),m=e.i(51348),x=e.i(43432),u=e.i(31278),p=e.i(8589),g=e.i(86536);function f({contact:e,standalone:s=!1,handleContactView:n,className:o=""}){let r=(0,t.jsx)("div",{className:`flex items-center justify-center ${o}`,children:n&&(0,t.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,t.jsx)(i.TooltipProvider,{delayDuration:300,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>n(e),"data-testid":`button-view-contact-${e.id}`,children:(0,t.jsx)(g.Eye,{className:"h-3.5 w-3.5 text-muted-foreground"})})}),(0,t.jsx)(i.TooltipContent,{children:(0,t.jsx)("p",{children:"View Contact"})})]})})})});return s?r:(0,t.jsx)(p.TableCell,{children:r})}e.i(82002);var j=e.i(29670),b=e.i(70756),v=e.i(10704);function w(){let{openModal:e}=(0,v.useRegistrationModal)();return(0,t.jsx)(i.TooltipProvider,{delayDuration:200,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)("button",{onClick:t=>{t.stopPropagation(),e()},className:"flex items-center gap-1 text-muted-foreground/60 hover:text-muted-foreground transition-colors cursor-pointer",children:[(0,t.jsx)("span",{className:"blur-[3px] select-none",children:"email@company.com"}),(0,t.jsx)(b.Lock,{className:"h-3 w-3 flex-shrink-0"})]})}),(0,t.jsx)(i.TooltipContent,{side:"top",className:"p-2",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1.5",children:[(0,t.jsx)("p",{className:"text-xs",children:"Sign in to see email"}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-6 text-xs px-2 text-[hsl(25,55%,50%)] hover:text-[hsl(25,55%,40%)] hover:bg-[hsl(25,55%,50%)]/10 font-medium",onClick:t=>{t.stopPropagation(),e()},children:"Sign up free"})]})})]})})}var y=e.i(52301);function C({contact:e,isSelected:r=!1,onToggleSelection:p,onClick:g,onHover:b,onLeave:v,showCheckbox:C=!0,showCompanyName:N=!1,showFeedback:k=!1,isHighlighted:T=!1,isAuthenticated:S=!0,handleContactView:M,handleComprehensiveEmailSearch:P,handleFindMobilePhone:E,onContactFeedback:R,pendingComprehensiveSearchIds:$,pendingPhoneRevealIds:D}){return(0,t.jsxs)("div",{className:(0,y.cn)("group flex items-center p-2 rounded-md cursor-pointer bg-card hover:bg-card-hover hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",T?e.email?"border-l-4 border-dashed border-yellow-400/40 border-4 border-yellow-400/20 border-dashed shadow-md":"border-l-4 border-dotted border-gray-400 border-4 border-gray-300/50 border-dotted shadow-md":"",r&&"bg-blue-50/30 dark:bg-blue-950/10"),onClick:g,onMouseEnter:()=>b?.(e.id),onMouseLeave:()=>v?.(),"data-testid":`contact-row-${e.id}`,children:[C&&p&&(0,t.jsx)("div",{className:"w-6 mr-1",children:(0,t.jsx)(n.Checkbox,{checked:r,onCheckedChange:()=>p(e.id),onClick:e=>e.stopPropagation(),"aria-label":`Select ${e.name}`,className:"mt-0.5"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground mt-0.5",children:[e.role||"No role specified",(e.city||e.country)&&(0,t.jsxs)("span",{className:"text-muted-foreground/70",children:[" â€¢ ",[e.city,e.country].filter(Boolean).join(", ")]})]}),N&&e.companyName&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground/70 mt-0.5",children:e.companyName}),(0,t.jsxs)("div",{className:"text-xs mt-1 flex items-center gap-1.5",children:[e.email?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:e.email}),e.linkedinUrl&&(0,t.jsx)("a",{href:e.linkedinUrl,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-muted-foreground/60 hover:text-blue-500 transition-colors","data-testid":`linkedin-link-${e.id}`,children:(0,t.jsx)(m.Linkedin,{className:"h-3 w-3"})})]}):S?P&&(0,t.jsx)(j.ComprehensiveSearchButton,{contact:e,onSearch:P,isPending:$?.has(e.id),displayMode:"text"}):(0,t.jsx)(w,{}),e.phoneNumber?(0,t.jsx)(l,{text:e.phoneNumber,className:"text-muted-foreground text-xs","data-testid":`phone-${e.id}`}):"pending"===e.mobilePhoneStatus||D?.has(e.id)&&!e.mobilePhoneStatus?(0,t.jsx)(i.TooltipProvider,{delayDuration:300,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"text-yellow-500 flex items-center gap-0.5",children:(0,t.jsx)(u.Loader2,{className:"h-3 w-3 animate-spin"})})}),(0,t.jsx)(i.TooltipContent,{side:"top",className:"text-xs",children:(0,t.jsx)("p",{children:"Finding phone..."})})]})}):"not_found"===e.mobilePhoneStatus?(0,t.jsx)(i.TooltipProvider,{delayDuration:300,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{className:"text-muted-foreground/60",children:(0,t.jsx)(x.Phone,{className:"h-3 w-3"})})}),(0,t.jsx)(i.TooltipContent,{side:"top",className:"text-xs",children:(0,t.jsx)("p",{children:"No mobile found"})})]})}):E?(0,t.jsxs)("button",{className:"group/phone flex items-center text-muted-foreground/60 hover:text-green-600 transition-all duration-200 focus:outline-none focus-visible:ring-1 focus-visible:ring-green-500 rounded",onClick:t=>{t.stopPropagation(),E(e.id)},"data-testid":`find-phone-${e.id}`,children:[(0,t.jsx)(x.Phone,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"max-w-0 overflow-hidden group-hover/phone:max-w-[80px] group-focus-visible/phone:max-w-[80px] transition-all duration-200 whitespace-nowrap",children:(0,t.jsx)("span",{className:"ml-1",children:"Find Phone"})})]}):null,e.alternativeEmails&&e.alternativeEmails.length>0&&(0,t.jsx)("div",{className:"mt-0.5 space-y-0.5",children:e.alternativeEmails.map((e,s)=>(0,t.jsx)("div",{className:"text-xs text-muted-foreground/70 italic",children:e},s))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.probability&&(0,t.jsx)(i.TooltipProvider,{delayDuration:300,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("span",{children:(0,t.jsxs)(s.Badge,{variant:"secondary",className:"text-xs cursor-help",children:[e.probability,"%"]})})}),(0,t.jsx)(i.TooltipContent,{children:(0,t.jsx)("p",{children:"Score reflects the contact's affinity to the target role/designation searched."})})]})}),(0,t.jsx)(f,{contact:e,handleContactView:M,standalone:!0}),k&&R&&(0,t.jsx)(i.TooltipProvider,{delayDuration:500,children:(0,t.jsxs)(i.Tooltip,{children:[(0,t.jsxs)(o.DropdownMenu,{children:[(0,t.jsx)(i.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(o.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 ml-1",onClick:e=>e.stopPropagation(),"data-testid":`button-feedback-${e.id}`,children:(0,t.jsx)(d.MessageSquare,{className:"h-4 w-4 text-muted-foreground"})})})}),(0,t.jsxs)(o.DropdownMenuContent,{children:[(0,t.jsxs)(o.DropdownMenuItem,{onClick:()=>R(e.id,"excellent"),children:[(0,t.jsx)(c.Star,{className:"h-4 w-4 mr-2 text-yellow-500"}),"Excellent Match"]}),(0,t.jsxs)(o.DropdownMenuItem,{onClick:()=>R(e.id,"terrible"),children:[(0,t.jsx)(h.ThumbsDown,{className:"h-4 w-4 mr-2 text-red-500"}),"Not a Match"]})]})]}),(0,t.jsx)(i.TooltipContent,{children:(0,t.jsx)("p",{children:"Rate this contact"})})]})})]})]})})]})}e.s(["ContactRow",()=>C],39401)},51239,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),n=e.i(38785),o=e.i(6625),i=e.i(4766),r=e.i(78917),l=e.i(92161),d=e.i(64659),c=e.i(55900),h=e.i(48256),m=e.i(61911),x=e.i(7486),u=e.i(73375),p=e.i(63059),g=e.i(75254);let f=(0,g.default)("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),j=(0,g.default)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var b=e.i(43531);let v=(0,g.default)("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);var w=e.i(46897),y=e.i(91593),C=e.i(90639);e.i(93806);var N=e.i(80144),k=e.i(7233),T=e.i(24487),S=e.i(58260),M=e.i(84923),P=e.i(52301);function E({query:e,currentResults:a,onResultsExtended:n,onLoginRequired:i,isAuthenticated:r,className:l=""}){let[d,c]=(0,s.useState)(!1),{toast:h}=(0,S.useToast)(),m=async()=>{if(!r)return void i();if(!e||!a)return void h({title:"No search to extend",description:"Please run a search first before extending",variant:"destructive"});c(!0);try{let t=localStorage.getItem("contactSearchConfig"),s=null;if(t)try{s=JSON.parse(t)}catch(e){console.error("Error parsing contact search config:",e)}let o=await (0,M.apiRequest)("POST","/api/search/extend",{query:e,excludeCompanyIds:a.map(e=>({name:e.name}))||[],contactSearchConfig:s||{enableCoreLeadership:!0,enableDepartmentHeads:!0,enableMiddleManagement:!0}}),i=await o.json();if(i.jobId&&i.companies&&i.companies.length>0){console.log(`[ExtendSearch] Extending search with ${i.companies.length} new companies`),h({title:"Finding more companies",description:`Adding ${i.companies.length} additional companies with contacts and emails.`});let t=setInterval(async()=>{try{let s=await (0,M.apiRequest)("GET",`/api/search-jobs/${i.jobId}`),o=await s.json();if("completed"===o.status&&o.results){clearInterval(t),c(!1);let s=o.results.companies||[],i=[...a||[],...s];n(e,i),h({title:"Search extended",description:`Added ${s.length} new companies to your results.`})}else"failed"===o.status&&(clearInterval(t),c(!1),h({title:"Extension failed",description:"Could not fetch additional companies. Please try again.",variant:"destructive"}))}catch(e){console.error("[ExtendSearch] Error polling job:",e)}},2e3);setTimeout(()=>{clearInterval(t),c(!1)},3e4)}else if(i.companies&&0===i.companies.length)c(!1),h({title:"No additional companies found",description:"We couldn't find more companies matching your search criteria."});else throw c(!1),Error(i.error||"Failed to extend search")}catch(e){c(!1),console.error("[ExtendSearch] Error extending search:",e),h({title:"Error",description:e instanceof Error?e.message:"Failed to extend search",variant:"destructive"})}};return(0,t.jsx)(T.TooltipProvider,{children:(0,t.jsxs)(T.Tooltip,{children:[(0,t.jsx)(T.TooltipTrigger,{asChild:!0,children:(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",className:(0,P.cn)("px-2 h-6 text-[11px] font-medium transition-all","hover:bg-muted/50 text-gray-400/60 hover:text-gray-500",l),onClick:m,disabled:d,"data-testid":"extend-search-button",children:[(0,t.jsx)(k.Plus,{className:(0,P.cn)("h-3 w-3 mr-0.5",d&&"animate-spin")}),d?"Extending...":"5 More"]})}),(0,t.jsx)(T.TooltipContent,{side:"top",children:(0,t.jsx)("p",{className:"text-xs",children:"Expand the search to include another five companies with the same prompt"})})]})})}var R=e.i(39401);let $=({company:e,isExpanded:a,onToggleExpand:u,isSelected:p,onToggleSelection:g,selectedContacts:f,onToggleContactSelection:j,companySelectionState:b,onCompanyCheckboxChange:N,shouldShowCompanyCheckbox:k,handleCompanyView:T,handleComprehensiveEmailSearch:S,handleFindMobilePhone:M,pendingContactIds:E,pendingComprehensiveSearchIds:$,pendingPhoneRevealIds:D,onContactClick:z,onContactHover:B,onContactLeave:L,shouldShowCheckbox:I,navigate:A,sortedContacts:H,viewMode:q,selectedEmailContact:F,showAllContacts:V,onToggleShowAllContacts:U,showDescription:_,onToggleDescription:O,isAuthenticated:K})=>{let G=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(G.current&&"indeterminate"===b){let e=G.current.querySelector("input");e&&(e.indeterminate=!0)}},[b]),(0,t.jsxs)(i.Card,{className:(0,P.cn)("rounded-none md:rounded-lg transition-all duration-200 cursor-pointer","bg-card hover:bg-card-hover hover:shadow-md hover:border-border",p&&"border-blue-400 dark:border-blue-600",!p&&"border-border"),children:[(0,t.jsx)("div",{onClick:u,className:"p-3",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,P.cn)("transition-all duration-300 ease-out overflow-hidden",k?"w-6 mr-1":"w-0 mr-0"),children:(0,t.jsx)(y.Checkbox,{ref:G,checked:"checked"===b||"indeterminate"===b,onCheckedChange:N,onClick:e=>e.stopPropagation(),"aria-label":`Select ${e.name}`,className:"mt-0.5"})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:"font-semibold text-base leading-tight flex items-center gap-2",children:[(0,t.jsx)(x.Building2,{className:"h-4 w-4 text-muted-foreground"}),e.name,e.description&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),O()},className:(0,P.cn)("p-0.5 rounded transition-all border relative","before:absolute before:inset-[-8px] before:content-['']",_?"text-foreground/70 border-transparent":"text-muted-foreground border-transparent hover:text-foreground/70"),"aria-label":"Show company description","data-testid":`button-info-company-${e.id}`,children:(0,t.jsx)(v,{className:"h-3.5 w-3.5"})})]}),_&&e.description&&(0,t.jsx)("div",{className:"mt-1.5 p-2 bg-muted/50 rounded-md text-sm text-muted-foreground leading-relaxed",onClick:e=>e.stopPropagation(),"data-testid":`text-description-company-${e.id}`,children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[e.website&&(0,t.jsxs)("a",{href:e.website.startsWith("http")?e.website:`https://${e.website}`,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex items-center gap-1 text-xs text-muted-foreground hover:text-primary transition-colors",children:[(0,t.jsx)(h.Globe,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"truncate max-w-[200px]",children:e.website.replace(/^https?:\/\//,"").replace(/\/$/,"")})]}),(e.city||e.country)&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,t.jsx)(w.MapPin,{className:"h-3 w-3"}),(0,t.jsx)("span",{children:[e.city,e.country].filter(Boolean).join(", ")})]}),e.contacts&&e.contacts.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,t.jsx)(m.Users,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.contacts.length," contacts"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[e.contacts&&e.contacts.length>0&&"scroll"===q&&(0,t.jsx)(n.Badge,{variant:"outline",className:"text-xs cursor-pointer hover:bg-accent-hover",children:a?(0,t.jsx)(c.ChevronUp,{className:"h-3 w-3"}):(0,t.jsx)(d.ChevronDown,{className:"h-3 w-3"})}),(0,t.jsxs)(C.DropdownMenu,{children:[(0,t.jsx)(C.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>e.stopPropagation(),children:(0,t.jsx)(l.Menu,{className:"h-4 w-4"})})}),(0,t.jsx)(C.DropdownMenuContent,{align:"end",children:(0,t.jsxs)(C.DropdownMenuItem,{onClick:()=>T(e),children:[(0,t.jsx)(r.ExternalLink,{className:"mr-2 h-4 w-4"}),"View Details"]})})]})]})]})})]})}),a&&H.length>0&&(0,t.jsx)(i.CardContent,{className:"pt-0 px-3 pb-3",children:(0,t.jsx)("div",{className:"border-t pt-2",children:(0,t.jsxs)("div",{className:(0,P.cn)("space-y-1.5",V&&H.length>10&&"max-h-[400px] overflow-y-auto pr-2"),children:[H.map((s,a)=>(0,t.jsx)("div",{className:(0,P.cn)(a>2&&!V&&"hidden"),children:(0,t.jsx)(R.ContactRow,{contact:s,isSelected:f.has(s.id),onToggleSelection:e=>j(null,e),onClick:()=>z?.(s,e),onHover:B,onLeave:L,showCheckbox:I?.(s.id)??!1,isHighlighted:F?.id===s.id,isAuthenticated:K,handleContactView:e=>{let t=e.slug||e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,50);A(`/p/${t}/${e.id}`)},handleComprehensiveEmailSearch:S,handleFindMobilePhone:M,pendingComprehensiveSearchIds:$,pendingPhoneRevealIds:D})},`${e.id}-contact-${s.id}`)),H.length>3&&(0,t.jsx)("div",{className:"pt-2",children:(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),U()},className:"w-full text-xs text-muted-foreground hover:text-foreground hover:bg-accent-hover transition-all py-2 rounded-md",children:V?"Show fewer contacts":`+${H.length-3} more contacts available`})})]})})}),a&&0===H.length&&(0,t.jsx)(i.CardContent,{className:"pt-0 px-4 pb-4",children:(0,t.jsx)("div",{className:"border-t pt-3",children:(0,t.jsx)("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"No contacts found for this company"})})})]})};function D({companies:e,handleCompanyView:n,handleComprehensiveEmailSearch:i,handleFindMobilePhone:r,pendingContactIds:l,pendingComprehensiveSearchIds:d,pendingPhoneRevealIds:c,onContactClick:h,onViewModeChange:m,selectedEmailContact:x,selectedContacts:g=new Set,onContactSelectionChange:v,getCompanySelectionState:w,onCompanySelectionChange:y,topActionsTrailing:C,onShowReport:k,onFindKeyEmails:T,isFindingEmails:S,query:M,onExtendSearch:R,isAuthenticated:D,onLoginRequired:z}){let B,L,I,A,H=(0,a.useRouter)(),[q,F]=(0,s.useState)("scroll"),[V,U]=(0,s.useState)(0),[_,O]=(0,s.useState)(new Set),[K,G]=(0,s.useState)(new Set),[W,Z]=(0,s.useState)(new Set),[J,Q]=(0,s.useState)(!1),[X,Y]=(0,s.useState)(null),[ee,et]=(0,s.useState)(null),[es,ea]=(0,s.useState)(!1),[en,eo]=(0,s.useState)(null),[ei,er]=(0,s.useState)(null),el=e=>{O(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},ed=e=>{G(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},ec=e=>{Z(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},eh=e=>"slides"===q||_.has(e);(0,s.useEffect)(()=>{"slides"===q&&V>=e.length&&U(Math.max(0,e.length-1))},[e.length,q,V]);let em=(e,t)=>{e&&e.stopPropagation(),v&&(v(t),es||g.has(t)||setTimeout(()=>ea(!0),500))},ex=e=>{ee&&clearTimeout(ee),et(setTimeout(()=>{Y(e)},5e3))},eu=()=>{ee&&(clearTimeout(ee),et(null)),Y(null)},ep=(e,t)=>{h&&h(e,t)},eg=e=>"ontouchstart"in window||navigator.maxTouchPoints>0||X===e||g.has(e)||es;(0,s.useEffect)(()=>{ea(g.size>0)},[g.size]);let ef=e=>{ei&&clearTimeout(ei),er(setTimeout(()=>{eo(e)},1500))},ej=()=>{ei&&(clearTimeout(ei),er(null)),eo(null)},eb=t=>{if("ontouchstart"in window||navigator.maxTouchPoints>0)return!0;let s=e.find(e=>e.id===t);if(!s)return!1;let a=w?.(s);return en===t||"unchecked"!==a||es},ev=(0,s.useMemo)(()=>{let t=new Map;return e.forEach(e=>{if(e.contacts&&e.contacts.length>0){let s=[...e.contacts].sort((e,t)=>(t.probability||0)-(e.probability||0));t.set(e.id,s)}}),t},[e]);return(0,s.useEffect)(()=>{if(e.length>0&&0===_.size){let t=e[0],s=ev.get(t.id);s&&s.length>0&&(console.log("Auto-expanding first company to show contacts:",t.name),O(new Set([t.id])))}},[e,ev]),(0,t.jsxs)("div",{className:"w-full space-y-1 bg-background",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between -mt-1 mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(B=e.reduce((e,t)=>e+(t.contacts?.length||0),0),L=g.size,I=B>0&&L===B,A=L>0&&L<B,(0,t.jsxs)("button",{onClick:()=>{I||A?Array.from(g).forEach(e=>{v?.(e)}):e.forEach(e=>{e.contacts?.forEach(e=>{g.has(e.id)||v?.(e.id)})})},className:(0,P.cn)("h-4 w-4 rounded-sm border ring-offset-background transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","ml-2 mr-2 flex items-center justify-center",I&&"bg-primary border-primary",A&&"border-primary bg-card",0===L&&"border-input bg-card hover:border-primary/50"),"aria-label":I?"Deselect all contacts":A?`${L} of ${B} selected`:"Select all contacts","data-testid":"checkbox-master-select-all",children:[I&&(0,t.jsx)(b.Check,{className:"h-3 w-3 text-primary-foreground"}),A&&(0,t.jsx)(b.Check,{className:"h-2.5 w-2.5 text-primary"})]})),C&&(0,t.jsx)("div",{className:"hidden md:flex",children:C}),(0,t.jsxs)("div",{className:"flex items-center gap-0.5 bg-muted/20 rounded-md p-0.5",children:[(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>{F("scroll"),m?.("scroll")},className:(0,P.cn)("px-2 h-6 text-[11px] font-medium transition-all","scroll"===q?"bg-background text-foreground shadow-sm":"hover:bg-muted-hover text-muted-foreground/60 hover:text-muted-foreground"),children:[(0,t.jsx)(f,{className:"h-3 w-3 mr-0.5"}),"Scroll"]}),(0,t.jsxs)(o.Button,{variant:"ghost",size:"sm",onClick:()=>{F("slides"),m?.("slides"),Q(!0),setTimeout(()=>Q(!1),1e3)},className:(0,P.cn)("px-2 h-6 text-[11px] font-medium transition-all","slides"===q?"bg-background text-foreground shadow-sm":"hover:bg-muted-hover text-muted-foreground/60 hover:text-muted-foreground"),children:[(0,t.jsx)(j,{className:"h-3 w-3 mr-0.5"}),"Slides"]})]}),T&&(0,t.jsx)(N.FindKeyEmailsButton,{onSearch:T,isSearching:S}),M&&R&&z&&(0,t.jsx)(E,{query:M,currentResults:e,onResultsExtended:R,isAuthenticated:D??!1,onLoginRequired:z}),k&&(0,t.jsx)("button",{onClick:k,className:"text-[11px] text-muted-foreground/60 hover:text-muted-foreground hover:underline ml-2 transition-colors","data-testid":"link-show-report",children:"Report"})]}),"slides"===q&&e.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{U(t=>t>0?t-1:e.length-1)},className:(0,P.cn)("h-8 w-8 p-0 transition-all",J?"bg-primary/20 border-primary":"border-muted-foreground/20"),children:(0,t.jsx)(u.ChevronLeft,{className:"h-4 w-4"})}),(0,t.jsxs)("span",{className:"text-xs text-muted-foreground px-1",children:[V+1," of ",e.length]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{U(t=>t<e.length-1?t+1:0)},className:(0,P.cn)("h-8 w-8 p-0 transition-all",J?"bg-primary/20 border-primary":"border-muted-foreground/20"),children:(0,t.jsx)(p.ChevronRight,{className:"h-4 w-4"})})]})]}),"scroll"===q?e.map(e=>(0,t.jsx)("div",{onMouseEnter:()=>ef(e.id),onMouseLeave:()=>ej(),children:(0,t.jsx)($,{company:e,isExpanded:eh(e.id),onToggleExpand:()=>el(e.id),isSelected:!1,onToggleSelection:()=>{},selectedContacts:g,onToggleContactSelection:em,companySelectionState:w?.(e),onCompanyCheckboxChange:()=>y?.(e),shouldShowCompanyCheckbox:eb(e.id),handleCompanyView:n,handleComprehensiveEmailSearch:i,handleFindMobilePhone:r,pendingContactIds:l,pendingComprehensiveSearchIds:d,pendingPhoneRevealIds:c,onContactClick:ep,onContactHover:ex,onContactLeave:eu,shouldShowCheckbox:eg,navigate:e=>H.push(e),sortedContacts:ev.get(e.id)||[],viewMode:q,selectedEmailContact:x,showAllContacts:K.has(e.id),onToggleShowAllContacts:()=>ed(e.id),showDescription:W.has(e.id),onToggleDescription:()=>ec(e.id),isAuthenticated:D})},`company-${e.id}`)):e.length>0&&(0,t.jsx)("div",{onMouseEnter:()=>ef(e[V].id),onMouseLeave:()=>ej(),children:(0,t.jsx)($,{company:e[V],isExpanded:eh(e[V].id),onToggleExpand:()=>el(e[V].id),isSelected:!1,onToggleSelection:()=>{},selectedContacts:g,onToggleContactSelection:em,companySelectionState:w?.(e[V]),onCompanyCheckboxChange:()=>y?.(e[V]),shouldShowCompanyCheckbox:eb(e[V].id),handleCompanyView:n,handleComprehensiveEmailSearch:i,handleFindMobilePhone:r,pendingContactIds:l,pendingComprehensiveSearchIds:d,pendingPhoneRevealIds:c,onContactClick:ep,onContactHover:ex,onContactLeave:eu,shouldShowCheckbox:eg,navigate:e=>H.push(e),sortedContacts:ev.get(e[V].id)||[],viewMode:q,selectedEmailContact:x,showAllContacts:K.has(e[V].id),onToggleShowAllContacts:()=>ed(e[V].id),showDescription:W.has(e[V].id),onToggleDescription:()=>ec(e[V].id),isAuthenticated:D},`company-${e[V].id}`)})]})}e.s(["default",()=>D],51239)}]);