(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16715,e=>{"use strict";let s=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],16715)},48256,e=>{"use strict";let s=(0,e.i(75254).default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>s],48256)},98919,e=>{"use strict";let s=(0,e.i(75254).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>s],98919)},73884,e=>{"use strict";let s=(0,e.i(75254).default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>s],73884)},78894,e=>{"use strict";let s=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>s],78894)},58041,e=>{"use strict";let s=(0,e.i(75254).default)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>s],58041)},73829,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(54616),i=e.i(4766),r=e.i(6625),n=e.i(38785),l=e.i(69638),d=e.i(73884),c=e.i(78894),x=e.i(16715),o=e.i(71689),m=e.i(31343),h=e.i(3116),u=e.i(58041),j=e.i(55436),g=e.i(98919),p=e.i(48256),f=e.i(94318),N=e.i(18566),v=e.i(58260),y=e.i(84923);function C(){let{user:e}=(0,f.useAuth)(),C=(0,N.useRouter)(),{toast:w}=(0,v.useToast)(),[b,T]=(0,t.useState)(null),k=(0,a.useMutation)({mutationFn:async()=>(await (0,y.apiRequest)("POST","/api/admin/test/run-all")).json(),onSuccess:e=>{T(e),w({title:"Tests completed",description:e.message,variant:"passed"===e.overallStatus||"warning"===e.overallStatus?"default":"destructive"})},onError:e=>{w({title:"Failed to run tests",description:e.message||"Test execution failed",variant:"destructive"})}}),A=(0,a.useMutation)({mutationFn:async()=>(await (0,y.apiRequest)("POST","/api/admin/test/extension")).json(),onSuccess:e=>{T(e),w({title:"Extension test completed",description:e.message,variant:"passed"===e.overallStatus||"warning"===e.overallStatus?"default":"destructive"})},onError:e=>{w({title:"Failed to run extension test",description:e.message||"Extension test execution failed",variant:"destructive"})}}),S=e=>(0,s.jsx)(n.Badge,{variant:{passed:"default",failed:"destructive",warning:"secondary",running:"outline",pending:"outline"}[e]||"outline",children:e});return(0,s.jsx)("div",{className:"container mx-auto py-8 px-4",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(r.Button,{onClick:()=>C.push("/admin"),variant:"ghost",size:"sm",children:[(0,s.jsx)(o.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"API Testing & Workflows"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Test system APIs and monitor workflow health"})]})]}),(0,s.jsx)(r.Button,{onClick:()=>k.mutate(),disabled:k.isPending,size:"sm",children:k.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Tests..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Play,{className:"h-4 w-4 mr-2"}),"Run All Tests"]})})]}),b&&(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{children:"Test Results Summary"}),S(b.overallStatus)]}),(0,s.jsxs)(i.CardDescription,{children:["Executed in ",b.duration,"ms on ",new Date(b.timestamp).toLocaleString()]})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.summary.passed}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Passed"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(d.XCircle,{className:"h-4 w-4 text-red-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.summary.failed}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Failed"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.AlertTriangle,{className:"h-4 w-4 text-yellow-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.summary.warnings}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Warnings"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Clock,{className:"h-4 w-4 text-blue-600"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:b.summary.total}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Tests"})]})]})]})})]}),b?.tests&&b.tests.length>0&&(0,s.jsx)("div",{className:"space-y-4",children:b.tests.map((e,t)=>(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"text-lg flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e.toLowerCase()){case"database connectivity":return(0,s.jsx)(u.Database,{className:"h-4 w-4 text-muted-foreground"});case"search functionality":return(0,s.jsx)(j.Search,{className:"h-4 w-4 text-muted-foreground"});case"api health":return(0,s.jsx)(p.Globe,{className:"h-4 w-4 text-muted-foreground"});case"authentication":return(0,s.jsx)(g.Shield,{className:"h-4 w-4 text-muted-foreground"});default:return(0,s.jsx)(c.AlertTriangle,{className:"h-4 w-4 text-muted-foreground"})}})(e.name),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.duration&&(0,s.jsxs)(n.Badge,{variant:"outline",className:"text-xs",children:[e.duration,"ms"]}),S(e.status)]})]}),(0,s.jsx)(i.CardDescription,{children:e.message})]}),e.subTests&&e.subTests.length>0&&(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:e.subTests.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(e=>{switch(e){case"passed":return(0,s.jsx)(l.CheckCircle,{className:"h-4 w-4 text-green-600"});case"failed":return(0,s.jsx)(d.XCircle,{className:"h-4 w-4 text-red-600"});case"warning":return(0,s.jsx)(c.AlertTriangle,{className:"h-4 w-4 text-yellow-600"});case"running":return(0,s.jsx)(x.RefreshCw,{className:"h-4 w-4 text-blue-600 animate-spin"});default:return(0,s.jsx)(h.Clock,{className:"h-4 w-4 text-gray-400"})}})(e.status),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-sm",children:e.name}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.message}),e.error&&(0,s.jsxs)("div",{className:"text-xs text-red-600 mt-1",children:["Error: ",e.error]})]})]}),e.data&&(0,s.jsx)("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:JSON.stringify(e.data)})]},t))})}),e.error&&(0,s.jsx)(i.CardContent,{children:(0,s.jsx)("div",{className:"p-3 border border-red-200 bg-red-50 rounded-lg",children:(0,s.jsxs)("div",{className:"text-sm text-red-800",children:[(0,s.jsx)("strong",{children:"Error:"})," ",e.error]})})})]},t))}),!b&&!k.isPending&&(0,s.jsx)(i.Card,{children:(0,s.jsxs)(i.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)(h.Clock,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No tests run yet"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:'Click "Run All Tests" to execute the comprehensive system test suite'}),(0,s.jsxs)(r.Button,{onClick:()=>k.mutate(),children:[(0,s.jsx)(m.Play,{className:"h-4 w-4 mr-2"}),"Run All Tests Now"]})]})}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsxs)(i.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Search,{className:"h-5 w-5"}),'"+5 More" Extension Test']}),(0,s.jsx)(i.CardDescription,{children:"Test the search extension feature that adds 5 additional companies to existing searches"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-muted rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium mb-2",children:"What this test does:"}),(0,s.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,s.jsx)("li",{children:"• Creates an initial search job"}),(0,s.jsx)("li",{children:"• Tests the extension endpoint with exclude lists"}),(0,s.jsx)("li",{children:"• Verifies exactly 5 unique companies are added"}),(0,s.jsx)("li",{children:"• Checks for duplicates and data integrity"}),(0,s.jsx)("li",{children:"• Validates contact and email discovery for extensions"})]})]}),(0,s.jsx)(r.Button,{onClick:()=>A.mutate(),disabled:A.isPending||k.isPending,className:"w-full",variant:"default",children:A.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.RefreshCw,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Extension Test..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Play,{className:"h-4 w-4 mr-2"}),'Run "+5 More" Extension Test']})})]})})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsxs)(i.CardHeader,{children:[(0,s.jsx)(i.CardTitle,{children:"Additional Testing Tools"}),(0,s.jsx)(i.CardDescription,{children:"Access other testing and monitoring features"})]}),(0,s.jsx)(i.CardContent,{children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)(r.Button,{onClick:()=>C.push("/testing"),variant:"outline",size:"sm",children:[(0,s.jsx)(c.AlertTriangle,{className:"h-4 w-4 mr-2"}),"System Health Dashboard"]}),(0,s.jsxs)(r.Button,{onClick:()=>C.push("/admin/email"),variant:"outline",size:"sm",children:[(0,s.jsx)(p.Globe,{className:"h-4 w-4 mr-2"}),"Email Testing"]}),(0,s.jsxs)(r.Button,{onClick:()=>window.open("/api/test/health","_blank"),variant:"outline",size:"sm",children:[(0,s.jsx)(g.Shield,{className:"h-4 w-4 mr-2"}),"API Health Check"]})]})})]})]})})}e.s(["default",()=>C])},66852,e=>{e.n(e.i(73829))}]);