(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83086,e=>{"use strict";let a=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>a],83086)},32076,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(48425),i=s.forwardRef((e,s)=>(0,a.jsx)(t.Primitive.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var n=e.i(25913),r=e.i(52301);let d=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(i,{ref:t,className:(0,r.cn)(d(),e),...s}));l.displayName=i.displayName,e.s(["Label",()=>l],32076)},84614,e=>{"use strict";let a=(0,e.i(75254).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>a],84614)},25652,e=>{"use strict";let a=(0,e.i(75254).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>a],25652)},88844,e=>{"use strict";let a=(0,e.i(75254).default)("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);e.s(["Package",()=>a],88844)},64659,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>a],64659)},55900,e=>{"use strict";let a=(0,e.i(75254).default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>a],55900)},95242,e=>{"use strict";let a=(0,e.i(75254).default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);e.s(["Pause",()=>a],95242)},92161,e=>{"use strict";let a=(0,e.i(75254).default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);e.s(["Menu",()=>a],92161)},869,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(66027),i=e.i(54616),n=e.i(53145),r=e.i(94814),d=e.i(50270),l=e.i(18566),c=e.i(84923),o=e.i(58260),m=e.i(94318),u=e.i(4766),x=e.i(38785),p=e.i(6625),h=e.i(84589),g=e.i(8402),j=e.i(37880),y=e.i(90639),N=e.i(64659),v=e.i(55900),f=e.i(92161),w=e.i(20278),C=e.i(7233),b=e.i(84614),k=e.i(88844),D=e.i(61911),F=e.i(87316),T=e.i(25652),P=e.i(31343),M=e.i(95242),L=e.i(88511),S=e.i(27612),q=e.i(83086),U=e.i(78583),I=e.i(52301);let A=d.z.object({name:d.z.string().min(1,"Campaign name is required"),durationDays:d.z.number().min(1).default(14),dailyLeadTarget:d.z.number().min(1).default(5)});function z(){let{toast:e}=(0,o.useToast)(),{user:d,authReady:z}=(0,m.useAuth)(),E=(0,l.useRouter)(),[R,$]=(0,s.useState)(new Set),[B,K]=(0,s.useState)(!1),O=(0,n.useForm)({resolver:(0,r.zodResolver)(A),defaultValues:{name:"",durationDays:14,dailyLeadTarget:5}}),{data:Q=[],isLoading:G}=(0,t.useQuery)({queryKey:["/api/campaigns"],enabled:z&&!!d}),H=(0,i.useMutation)({mutationFn:async e=>await (0,c.apiRequest)("POST","/api/campaigns",e),onSuccess:()=>{c.queryClient.invalidateQueries({queryKey:["/api/campaigns"]}),e({title:"Campaign created",description:"Your campaign has been successfully created"}),K(!1),O.reset()},onError:a=>{e({title:"Error",description:a.message||"Failed to create campaign",variant:"destructive"})}}),V=(0,i.useMutation)({mutationFn:async e=>{await (0,c.apiRequest)("DELETE",`/api/campaigns/${e}`)},onSuccess:()=>{c.queryClient.invalidateQueries({queryKey:["/api/campaigns"]}),e({title:"Campaign deleted",description:"Campaign has been successfully deleted"})},onError:a=>{e({title:"Error",description:a.message||"Failed to delete campaign",variant:"destructive"})}}),_=(0,i.useMutation)({mutationFn:async({id:e,status:a})=>await (0,c.apiRequest)("PUT",`/api/campaigns/${e}`,{status:a}),onSuccess:()=>{c.queryClient.invalidateQueries({queryKey:["/api/campaigns"]}),e({title:"Campaign updated",description:"Campaign status has been updated"})},onError:a=>{e({title:"Error",description:a.message||"Failed to update campaign",variant:"destructive"})}});return G?(0,a.jsx)("div",{className:"container mx-auto py-8",children:(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)(u.Card,{className:"p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]},e))})}):(0,a.jsxs)("div",{className:"container mx-auto py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Campaigns"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage your outreach campaigns"})]}),(0,a.jsxs)(p.Button,{onClick:()=>K(!0),"data-testid":"button-create-campaign",children:[(0,a.jsx)(C.Plus,{className:"h-4 w-4 mr-2"}),"New Campaign"]})]}),0===Q.length?(0,a.jsxs)(u.Card,{className:"p-12 text-center",children:[(0,a.jsx)(w.Target,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No campaigns yet"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first campaign to start generating leads"}),(0,a.jsxs)(p.Button,{onClick:()=>K(!0),"data-testid":"button-create-first-campaign",children:[(0,a.jsx)(C.Plus,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]}):(0,a.jsx)("div",{className:"space-y-3",children:Q.map(e=>{var s;let t,i=R.has(e.id),n=(s=e.status,(t={draft:{variant:"outline",className:"text-gray-600"},active:{variant:"default",className:"bg-green-600"},paused:{variant:"secondary",className:"text-yellow-600"},stopped:{variant:"destructive",className:""},completed:{variant:"outline",className:"text-blue-600"}})[s]||t.draft);return(0,a.jsxs)(u.Card,{className:(0,I.cn)("rounded-lg transition-all duration-200 hover:shadow-md hover:border-purple-200 dark:hover:border-purple-800"),"data-testid":`campaign-card-${e.id}`,children:[(0,a.jsx)("div",{onClick:()=>E.push(`/campaigns/${e.id}`),className:"p-3 cursor-pointer hover:bg-gray-50/50 dark:hover:bg-gray-800/30 rounded-t-lg transition-colors",children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("h3",{className:"font-semibold text-base leading-tight flex items-center gap-2 text-gray-700 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors",children:[(0,a.jsx)(w.Target,{className:"h-4 w-4 text-muted-foreground"}),e.name]}),(0,a.jsx)(x.Badge,{...n,className:n.className,"data-testid":`badge-status-${e.id}`,children:e.status}),e.generationType&&(0,a.jsx)(x.Badge,{variant:"secondary",className:"flex items-center gap-1","data-testid":`badge-generation-type-${e.id}`,children:"ai_unique"===e.generationType?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.Sparkles,{className:"h-3 w-3"}),"AI Unique"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(U.FileText,{className:"h-3 w-3"}),"Template"]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1 flex-wrap",children:[e.totalLeadsGenerated>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(D.Users,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.totalLeadsGenerated," leads"]})]}),null!==e.responseRate&&e.responseRate>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(T.TrendingUp,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[(100*e.responseRate).toFixed(1),"% response"]})]}),e.durationDays&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,a.jsx)(F.Calendar,{className:"h-3 w-3"}),(0,a.jsxs)("span",{children:[e.durationDays," days"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Badge,{variant:"outline",className:"text-xs cursor-pointer hover:bg-accent-hover",onClick:a=>{var s;a.stopPropagation(),s=e.id,$(e=>{let a=new Set(e);return a.has(s)?a.delete(s):a.add(s),a})},children:i?(0,a.jsx)(v.ChevronUp,{className:"h-3 w-3"}):(0,a.jsx)(N.ChevronDown,{className:"h-3 w-3"})}),(0,a.jsxs)(y.DropdownMenu,{children:[(0,a.jsx)(y.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(p.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:e=>e.stopPropagation(),"data-testid":`button-menu-${e.id}`,children:(0,a.jsx)(f.Menu,{className:"h-4 w-4"})})}),(0,a.jsxs)(y.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(y.DropdownMenuItem,{onClick:a=>{let s;a.stopPropagation(),s="active"===e.status?"paused":"active",_.mutate({id:e.id,status:s})},"data-testid":`menu-toggle-status-${e.id}`,children:"active"===e.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Pause,{className:"mr-2 h-4 w-4"}),"Pause Campaign"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P.Play,{className:"mr-2 h-4 w-4"}),"Activate Campaign"]})}),(0,a.jsxs)(y.DropdownMenuItem,{onClick:a=>{a.stopPropagation(),E.push(`/campaigns/${e.id}`)},"data-testid":`menu-edit-${e.id}`,children:[(0,a.jsx)(L.Edit,{className:"mr-2 h-4 w-4"}),"Edit Campaign"]}),(0,a.jsxs)(y.DropdownMenuItem,{onClick:a=>{var s;a.stopPropagation(),s=e.id,confirm("Are you sure you want to delete this campaign?")&&V.mutate(s)},className:"text-red-600","data-testid":`menu-delete-${e.id}`,children:[(0,a.jsx)(S.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Campaign"]})]})]})]})]})})})}),i&&(0,a.jsx)("div",{className:"px-3 pb-3 border-t pt-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(b.User,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Sender Profile:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.senderProfileId||"Not set"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(k.Package,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Product:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.strategicProfileId||"Not set"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(D.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Target Customer:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.targetCustomerProfileId||"Not set"})]}),e.generationType&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:["ai_unique"===e.generationType?(0,a.jsx)(q.Sparkles,{className:"h-4 w-4 text-muted-foreground"}):(0,a.jsx)(U.FileText,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:"Generation Type:"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"ai_unique"===e.generationType?"AI Unique Emails":"Merge-field Template"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Daily Target:"}),(0,a.jsxs)("span",{className:"text-muted-foreground ml-2",children:[e.dailyLeadTarget," leads"]})]}),e.startDate&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Start Date:"}),(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:new Date(e.startDate).toLocaleDateString()})]}),e.endDate&&(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"End Date:"}),(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:new Date(e.endDate).toLocaleDateString()})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Created:"}),(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-medium",children:"Last Updated:"}),(0,a.jsx)("span",{className:"text-muted-foreground ml-2",children:new Date(e.updatedAt).toLocaleDateString()})]})]})]})})]},e.id)})}),(0,a.jsx)(h.Dialog,{open:B,onOpenChange:K,children:(0,a.jsxs)(h.DialogContent,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(h.DialogHeader,{children:[(0,a.jsx)(h.DialogTitle,{children:"Create New Campaign"}),(0,a.jsx)(h.DialogDescription,{children:"Set up a new outreach campaign to generate leads"})]}),(0,a.jsx)(g.Form,{...O,children:(0,a.jsxs)("form",{onSubmit:O.handleSubmit(e=>{H.mutate(e)}),className:"space-y-4",children:[(0,a.jsx)(g.FormField,{control:O.control,name:"name",render:({field:e})=>(0,a.jsxs)(g.FormItem,{children:[(0,a.jsx)(g.FormLabel,{children:"Campaign Name"}),(0,a.jsx)(g.FormControl,{children:(0,a.jsx)(j.Input,{placeholder:"Q1 2024 Outreach",...e,"data-testid":"input-campaign-name"})}),(0,a.jsx)(g.FormMessage,{})]})}),(0,a.jsx)(g.FormField,{control:O.control,name:"durationDays",render:({field:e})=>(0,a.jsxs)(g.FormItem,{children:[(0,a.jsx)(g.FormLabel,{children:"Duration (days)"}),(0,a.jsx)(g.FormControl,{children:(0,a.jsx)(j.Input,{type:"number",min:"1",...e,onChange:a=>e.onChange(parseInt(a.target.value)||1),"data-testid":"input-duration-days"})}),(0,a.jsx)(g.FormMessage,{})]})}),(0,a.jsx)(g.FormField,{control:O.control,name:"dailyLeadTarget",render:({field:e})=>(0,a.jsxs)(g.FormItem,{children:[(0,a.jsx)(g.FormLabel,{children:"Daily Lead Target"}),(0,a.jsx)(g.FormControl,{children:(0,a.jsx)(j.Input,{type:"number",min:"1",...e,onChange:a=>e.onChange(parseInt(a.target.value)||1),"data-testid":"input-daily-lead-target"})}),(0,a.jsx)(g.FormMessage,{})]})}),(0,a.jsxs)(h.DialogFooter,{children:[(0,a.jsx)(p.Button,{type:"button",variant:"outline",onClick:()=>K(!1),"data-testid":"button-cancel-create",children:"Cancel"}),(0,a.jsx)(p.Button,{type:"submit",disabled:H.isPending,"data-testid":"button-submit-create",children:H.isPending?"Creating...":"Create Campaign"})]})]})})]})})]})}e.s([],2828),e.i(2828),e.s(["CampaignsPage",()=>z],869)},77824,e=>{e.n(e.i(869))}]);